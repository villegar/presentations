<!DOCTYPE html>
<html lang="en-GB"><head>
<script src="xxiv-simmac_files/libs/clipboard/clipboard.min.js"></script>
<script src="xxiv-simmac_files/libs/quarto-html/tabby.min.js"></script>
<script src="xxiv-simmac_files/libs/quarto-html/popper.min.js"></script>
<script src="xxiv-simmac_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="xxiv-simmac_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="xxiv-simmac_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="xxiv-simmac_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="xxiv-simmac_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Roberto Villegas-Diaz">
  <title> API development with R</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="xxiv-simmac_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="xxiv-simmac_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="xxiv-simmac_files/libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="./css/style.css">
  <link href="xxiv-simmac_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="xxiv-simmac_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="xxiv-simmac_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="xxiv-simmac_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="xxiv-simmac_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
  <script src="xxiv-simmac_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="xxiv-simmac_files/libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
  <script src="xxiv-simmac_files/libs/leaflet-1.3.1/leaflet.js"></script>
  <link href="xxiv-simmac_files/libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
  <script src="xxiv-simmac_files/libs/proj4-2.6.2/proj4.min.js"></script>
  <script src="xxiv-simmac_files/libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
  <link href="xxiv-simmac_files/libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
  <script src="xxiv-simmac_files/libs/leaflet-binding-2.2.1/leaflet.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#ACD8A9" class="quarto-title-block center">
  <h1 class="title"><img src="images/danta.png"><br>API development with R</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Roberto Villegas-Diaz 
</div>
        <p class="quarto-title-affiliation">
            University of Liverpool
          </p>
    </div>
</div>

</section>
<section id="outline" class="title-slide slide level1 center">
<h1>Outline</h1>
<ul>
<li><strong>Day 1</strong>
<ul>
<li>Introduction to APIs</li>
<li>Working with APIs</li>
<li>Introduction to <code>{plumber}</code></li>
</ul></li>
<li><strong>Day 2</strong>
<ul>
<li>Building your own API</li>
<li>Further considerations</li>
</ul></li>
</ul>
<!-- # Day 1 -->
</section>

<section>
<section id="introduction-to-apis" class="title-slide slide level1 center">
<h1>Introduction to APIs</h1>

</section>
<section id="whats-an-api" class="slide level2 smaller">
<h2>What’s an API?</h2>
<blockquote>
<p><strong>A</strong>pplication <strong>P</strong>rogramming <strong>I</strong>nterface</p>
</blockquote>
<div class="qr-image-div">
<p><img data-src="images/API-EN.png" data-fig-align="center" height="450"> <span class="img-caption-medium"> <strong>Source:</strong> <span class="citation" data-cites="Tolassy2015">(<a href="#/references" role="doc-biblioref" onclick="">Tolassy, 2015</a>)</span> </span></p>
</div>
</section>
<section id="why-use-apis" class="slide level2 smaller">
<h2>Why use APIs?</h2>
<div>
<ul>
<li class="fragment">Streamline your data flows</li>
<li class="fragment">Common language</li>
<li class="fragment">Static interface</li>
<li class="fragment">Enable others to use your “products”</li>
</ul>
</div>
<!-- ; @Zhong2019 -->
<p><img data-src="images/xkcd_api_2x.png" class="absolute" style="bottom: 0px; right: 0px; "></p>

<aside><div>
<p><strong>Comic source:</strong> <a href="https://xkcd.com/1481">https://xkcd.com/1481</a></p>
</div></aside></section>
<section id="how-do-apis-work" class="slide level2 smaller">
<h2>How do APIs work?</h2>
<blockquote>
<p>You don’t need to know how the kitchen or the restaurant operates, you just need to know how to order. <span class="citation" data-cites="Grguric_Buhler_2020">(<a href="#/references" role="doc-biblioref" onclick="">Grgurić and Buhler, 2020</a>)</span></p>
</blockquote>
<div class="qr-image-div">
<p><img data-src="images/api_restaurant.png" data-fig-align="center" height="450"> <span class="img-caption-medium"> <strong>Source:</strong> <span class="citation" data-cites="Layne2020">(<a href="#/references" role="doc-biblioref" onclick="">Layne, 2020</a>)</span> </span></p>
</div>
</section>
<section id="example-apis" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Example APIs</h2>
<p>Few examples (there are too many):</p>
<ul>
<li>Open Street Maps: <a href="https://wiki.openstreetmap.org/wiki/API">https://wiki.openstreetmap.org/wiki/API</a></li>
<li>Wikidata: <a href="https://www.wikidata.org/w/api.php?action=help">https://www.wikidata.org/w/api.php?action=help</a></li>
<li>X / Twitter: <a href="https://developer.twitter.com/en/products/twitter-api">https://developer.twitter.com/en/products/twitter-api</a></li>
</ul>
<div class="qr-image-div">
<p><img data-src="images/apis-enable-scale.jpg" data-fig-align="center" height="350"> <span class="img-caption-medium"> <br> <strong>Source:</strong> <span class="citation" data-cites="Fox2016">(<a href="#/references" role="doc-biblioref" onclick="">Fox, 2016</a>)</span> </span></p>
</div>
</section>
<section id="example-apis-1" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Example APIs</h2>
<p>Few examples (there are too many):</p>
<ul>
<li>Open Street Maps: <a href="https://wiki.openstreetmap.org/wiki/API">https://wiki.openstreetmap.org/wiki/API</a></li>
<li>Wikidata: <a href="https://www.wikidata.org/w/api.php?action=help">https://www.wikidata.org/w/api.php?action=help</a></li>
<li>X / Twitter: <a href="https://developer.twitter.com/en/products/twitter-api">https://developer.twitter.com/en/products/twitter-api</a></li>
</ul>
<p><strong>Resources of interest</strong>:</p>
<ul>
<li>List of public APIs: <a href="https://github.com/public-apis/public-apis">https://github.com/public-apis/public-apis</a></li>
<li>R package to access <em>Hundreds of ‘APIs’</em>: <a href="https://github.com/jonthegeek/anyapi">https://github.com/jonthegeek/anyapi</a></li>
</ul>
<!-- <div class='qr-image-div'> -->
<!-- ![](images/apis-enable-scale.jpg){height=150 fig-align='center'} -->
<!-- <span class="img-caption-medium"> -->
<!-- <br /><br /> -->
<!-- **Source:** [@Fox2016] -->
<!-- </span> -->
<!-- </div> -->
</section></section>
<section>
<section id="working-with-apis" class="title-slide slide level1 center">
<h1>Working with APIs</h1>

</section>
<section id="structure-of-a-query" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Structure of a Query</h2>
<div class="qr-image-div">
<p><img data-src="images/Web_Request-GET.webp" data-fig-align="center" height="450"> <span class="img-caption-medium"> <strong>Source:</strong> <span class="citation" data-cites="realisable2023">(<a href="#/references" role="doc-biblioref" onclick="">realisable, 2023</a>)</span> </span></p>
</div>
</section>
<section id="structure-of-a-query-1" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Structure of a Query</h2>
<div class="qr-image-div">
<p><img data-src="images/Web_Request-GET.webp" data-fig-align="center" height="300"> <span class="img-caption-medium"> <strong>Source:</strong> <span class="citation" data-cites="realisable2023">(<a href="#/references" role="doc-biblioref" onclick="">realisable, 2023</a>)</span> </span></p>
</div>
<table>
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>“Method”</th>
<th>“Scheme”</th>
<th>“Server”</th>
<th>“Path”</th>
<th style="text-align: right;">“Query String”</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Pavement</td>
<td>Liver building</td>
<td>Flat 3</td>
<td>Kitchen/cupboard/get_mug</td>
<td style="text-align: right;">colour=red</td>
</tr>
<tr class="even">
<td>Road</td>
<td>Liver building</td>
<td>Garage</td>
<td>park_car</td>
<td style="text-align: right;"></td>
</tr>
</tbody>
</table>
</section>
<section id="structure-of-a-query-response" class="slide level2 smaller">
<h2>Structure of a Query: Response</h2>
<div>
<ul>
<li class="fragment">Typically get a <em>header</em> and <em>content</em> in the response.</li>
<li class="fragment">Common response codes in header
<ul>
<li class="fragment">200 – OK</li>
<li class="fragment">404 – Not found</li>
<li class="fragment">500 – Internal server error</li>
<li class="fragment">For more details see: <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">https://en.wikipedia.org/wiki/List_of_HTTP_status_codes</a></li>
</ul></li>
<li class="fragment">Content is usually formatted in JSON<sup>1</sup> or XML<sup>2</sup>.</li>
</ul>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>JavaScript Object Notation: <a href="https://www.json.org">https://www.json.org</a></p></li><li id="fn2"><p>eXtensible Markup Language: <a href="https://en.wikipedia.org/wiki/XML">https://en.wikipedia.org/wiki/XML</a></p></li></ol></aside></section>
<section id="structure-of-a-query-example" class="slide level2 smaller">
<h2>Structure of a Query: Example</h2>
<div class="qr-image-div">
<p><img data-src="images/structure-of-a-CrossRef-API-Query.png" data-fig-align="center" height="150"> <br><br> <span class="img-caption-medium"> <strong>Source:</strong> <span class="citation" data-cites="Teplitzky2021">(<a href="#/references" role="doc-biblioref" onclick="">Teplitzky et al., 2021</a>)</span> </span></p>
</div>
<p>Try running the following line of code:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">url</span>(<span class="st">"https://api.crossref.org/works/&lt;DOI&gt;"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Replace <code>&lt;DOI&gt;</code> by any DOI (Direct Object Identifier) you want! For example: <a href="https://doi.org/10.1016/j.gloplacha.2022.103790"><code>10.1016/j.gloplacha.2022.103790</code></a>.</p>
</section>
<section id="structure-of-a-query-example-1" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Structure of a Query: Example</h2>
<div class="qr-image-div">
<p><img data-src="images/structure-of-a-CrossRef-API-Query.png" data-fig-align="center" height="150"> <br><br> <span class="img-caption-medium"> <strong>Source:</strong> <span class="citation" data-cites="Teplitzky2021">(<a href="#/references" role="doc-biblioref" onclick="">Teplitzky et al., 2021</a>)</span> </span></p>
</div>
<p>Try running the following line of code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb2-1" class="hljs-ln-code"><a href="#cb2-1"></a><span class="fu">url</span>(<span class="st">"https://api.crossref.org/works/10.1016/j.gloplacha.2022.103790"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A connection with                                                                            
description "https://api.crossref.org/works/10.1016/j.gloplacha.2022.103790"
class       "url-libcurl"                                                   
mode        "r"                                                             
text        "text"                                                          
opened      "closed"                                                        
can read    "yes"                                                           
can write   "no"                                                            </code></pre>
</div>
</div>
</section>
<section id="structure-of-a-query-example-2" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Structure of a Query: Example</h2>
<div class="qr-image-div">
<p><img data-src="images/structure-of-a-CrossRef-API-Query.png" data-fig-align="center" height="150"> <br><br> <span class="img-caption-medium"> <strong>Source:</strong> <span class="citation" data-cites="Teplitzky2021">(<a href="#/references" role="doc-biblioref" onclick="">Teplitzky et al., 2021</a>)</span> </span></p>
</div>
<p>Try running the following line of code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb4-1" class="hljs-ln-code"><a href="#cb4-1"></a>con <span class="ot">&lt;-</span> <span class="fu">url</span>(<span class="st">"https://api.crossref.org/works/10.1016/j.gloplacha.2022.103790"</span>)</span>
<span id="cb4-2" class="hljs-ln-code"><a href="#cb4-2"></a>tmp <span class="ot">&lt;-</span> <span class="fu">readLines</span>(con)</span>
<span id="cb4-3" class="hljs-ln-code"><a href="#cb4-3"></a><span class="fu">strsplit</span>(tmp, <span class="st">","</span>)[[<span class="dv">1</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>] <span class="co"># extract few rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "{\"status\":\"ok\""                             
 [2] "\"message-type\":\"work\""                      
 [3] "\"message-version\":\"1.0.0\""                  
 [4] "\"message\":{\"indexed\":{\"date-parts\":[[2024"
 [5] "2"                                              
 [6] "7]]"                                            
 [7] "\"date-time\":\"2024-02-07T17:44:10Z\""         
 [8] "\"timestamp\":1707327850108}"                   
 [9] "\"reference-count\":52"                         
[10] "\"publisher\":\"Elsevier BV\""                  
[11] "\"license\":[{\"start\":{\"date-parts\":[[2022" 
[12] "4"                                              </code></pre>
</div>
</div>
</section>
<section id="structure-of-a-query-example-3" class="slide level2 smaller" data-auto-animate="false">
<h2 data-id="quarto-animate-title">Structure of a Query: Example</h2>
<div class="qr-image-div">
<p><img data-src="images/structure-of-a-CrossRef-API-Query.png" data-fig-align="center" height="150"> <br><br> <span class="img-caption-medium"> <strong>Source:</strong> <span class="citation" data-cites="Teplitzky2021">(<a href="#/references" role="doc-biblioref" onclick="">Teplitzky et al., 2021</a>)</span> </span></p>
</div>
<p>A <em>nicer</em> approach to run this code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>result <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(</span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="st">"https://api.crossref.org/works/10.1016/j.gloplacha.2022.103790"</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>)</span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co"># get the query status</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>result<span class="sc">$</span>status</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ok"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># get field from the result, 'reference count'</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>result<span class="sc">$</span>message<span class="sc">$</span><span class="st">`</span><span class="at">reference-count</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 52</code></pre>
</div>
</div>
</section></section>
<section>
<section id="hands-on-session-1" class="title-slide slide level1 center" data-auto-animate="false">
<h1 data-id="quarto-animate-title">Hands on session 1</h1>
<ul>
<li><p>[<strong>Guided</strong>] How many people are on the International Space Station (ISS) right now?</p></li>
<li><p>[<strong>DIY</strong>] What is the current position of the International Space Station? Can you create a plot?</p></li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Could you please download the following zip file? This file contains all the scripts we will use for the hands-on sessions.</p>
<p><a href="http://tinyurl.com/xxiv-simmac-api">http://tinyurl.com/xxiv-simmac-api</a></p>
</div>
</div>
</div>
</section>
<section id="guided-how-many-people-are-on-the-international-space-station-right-now" class="slide level2 smaller" data-auto-animate="false">
<h2 data-id="quarto-animate-title">[<strong>Guided</strong>] How many people are on the International Space Station right now?</h2>
<p><strong>API call: </strong> <a href="http://api.open-notify.org/astros.json">http://api.open-notify.org/astros.json</a></p>

<div class="sourceCode" id="cb10" data-code-line-numbers="1|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb10-1" class="hljs-ln-code"><a href="#cb10-1"></a>response <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="st">"http://api.open-notify.org/astros.json"</span>)</span>
<span id="cb10-2" class="hljs-ln-code"><a href="#cb10-2"></a>response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Note the values for <em>Status</em> and <em>Content-Type</em>! Both useful to determine whether the query was successful and the type of content returned.</p>
</div>
</div>
</div>
<aside><div>
<p><strong>Reference R Script:</strong> <code>1_api_who_is_on_the_ISS_now.R</code></p>
</div></aside></section>
<section id="guided-how-many-people-are-on-the-international-space-station-right-now-1" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">[<strong>Guided</strong>] How many people are on the International Space Station right now?</h2>
<p><strong>API call: </strong> <a href="http://api.open-notify.org/astros.json">http://api.open-notify.org/astros.json</a></p>

<div class="sourceCode" id="cb11" data-code-line-numbers="|4|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb11-1" class="hljs-ln-code"><a href="#cb11-1"></a>response <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="st">"http://api.open-notify.org/astros.json"</span>)</span>
<span id="cb11-2" class="hljs-ln-code"><a href="#cb11-2"></a></span>
<span id="cb11-3" class="hljs-ln-code"><a href="#cb11-3"></a><span class="co"># the content is in binary, so convert the response to an R data object</span></span>
<span id="cb11-4" class="hljs-ln-code"><a href="#cb11-4"></a>content <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(response<span class="sc">$</span>content))</span>
<span id="cb11-5" class="hljs-ln-code"><a href="#cb11-5"></a></span>
<span id="cb11-6" class="hljs-ln-code"><a href="#cb11-6"></a><span class="co"># check number of people</span></span>
<span id="cb11-7" class="hljs-ln-code"><a href="#cb11-7"></a>content<span class="sc">$</span>number</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside><div>
<p><strong>Reference R Script:</strong> <code>1_api_who_is_on_the_ISS_now.R</code></p>
</div></aside></section>
<section id="guided-how-many-people-are-on-the-international-space-station-right-now-2" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">[<strong>Guided</strong>] How many people are on the International Space Station right now?</h2>
<p><strong>API call: </strong> <a href="http://api.open-notify.org/astros.json">http://api.open-notify.org/astros.json</a></p>

<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb12-1" class="hljs-ln-code"><a href="#cb12-1"></a>response <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="st">"http://api.open-notify.org/astros.json"</span>)</span>
<span id="cb12-2" class="hljs-ln-code"><a href="#cb12-2"></a></span>
<span id="cb12-3" class="hljs-ln-code"><a href="#cb12-3"></a><span class="co"># the content is in binary, so convert the response to an R data object</span></span>
<span id="cb12-4" class="hljs-ln-code"><a href="#cb12-4"></a>content <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(response<span class="sc">$</span>content))</span>
<span id="cb12-5" class="hljs-ln-code"><a href="#cb12-5"></a></span>
<span id="cb12-6" class="hljs-ln-code"><a href="#cb12-6"></a><span class="co"># check the people</span></span>
<span id="cb12-7" class="hljs-ln-code"><a href="#cb12-7"></a>content<span class="sc">$</span>people</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                name craft
1    Jasmin Moghbeli   ISS
2   Andreas Mogensen   ISS
3   Satoshi Furukawa   ISS
4 Konstantin Borisov   ISS
5     Oleg Kononenko   ISS
6       Nikolai Chub   ISS
7       Loral O'Hara   ISS</code></pre>
</div>
</div>
<aside><div>
<p><strong>Reference R Script:</strong> <code>1_api_who_is_on_the_ISS_now.R</code></p>
</div></aside></section>
<section id="guided-how-many-people-are-on-the-international-space-station-right-now-3" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">[<strong>Guided</strong>] How many people are on the International Space Station right now?</h2>
<p><strong>API call: </strong> <a href="http://api.open-notify.org/astros.json">http://api.open-notify.org/astros.json</a></p>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Alternative</strong></p>
</div>
<div class="callout-content">
<p>Note that we can use the API call with the <code>jsonlite::read_json</code> function; however, we don’t get as much details from the call as we did with our previous approach. Also, this only works when the response returned is in JSON format.</p>
</div>
</div>
</div>
<div class="sourceCode" id="cb14" data-code-line-numbers="2|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb14-1" class="hljs-ln-code"><a href="#cb14-1"></a><span class="co"># read contents from API call</span></span>
<span id="cb14-2" class="hljs-ln-code"><a href="#cb14-2"></a>contents <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(<span class="st">"http://api.open-notify.org/astros.json"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="guided-how-many-people-are-on-the-international-space-station-right-now-4" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">[<strong>Guided</strong>] How many people are on the International Space Station right now?</h2>
<p><strong>API call: </strong> <a href="http://api.open-notify.org/astros.json">http://api.open-notify.org/astros.json</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb15-1" class="hljs-ln-code"><a href="#cb15-1"></a><span class="co"># read contents from API call</span></span>
<span id="cb15-2" class="hljs-ln-code"><a href="#cb15-2"></a>contents <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(<span class="st">"http://api.open-notify.org/astros.json"</span>)</span>
<span id="cb15-3" class="hljs-ln-code"><a href="#cb15-3"></a></span>
<span id="cb15-4" class="hljs-ln-code"><a href="#cb15-4"></a><span class="co"># check status of query</span></span>
<span id="cb15-5" class="hljs-ln-code"><a href="#cb15-5"></a>contents<span class="sc">$</span>message</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "success"</code></pre>
</div>
</div>
</section>
<section id="guided-how-many-people-are-on-the-international-space-station-right-now-5" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">[<strong>Guided</strong>] How many people are on the International Space Station right now?</h2>
<p><strong>API call: </strong> <a href="http://api.open-notify.org/astros.json">http://api.open-notify.org/astros.json</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb17-1" class="hljs-ln-code"><a href="#cb17-1"></a><span class="co"># read contents from API call</span></span>
<span id="cb17-2" class="hljs-ln-code"><a href="#cb17-2"></a>contents <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(<span class="st">"http://api.open-notify.org/astros.json"</span>)</span>
<span id="cb17-3" class="hljs-ln-code"><a href="#cb17-3"></a></span>
<span id="cb17-4" class="hljs-ln-code"><a href="#cb17-4"></a><span class="co"># check number of people</span></span>
<span id="cb17-5" class="hljs-ln-code"><a href="#cb17-5"></a>contents<span class="sc">$</span>number</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
</section>
<section id="guided-how-many-people-are-on-the-international-space-station-right-now-6" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">[<strong>Guided</strong>] How many people are on the International Space Station right now?</h2>
<p><strong>API call: </strong> <a href="http://api.open-notify.org/astros.json">http://api.open-notify.org/astros.json</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb19-1" class="hljs-ln-code"><a href="#cb19-1"></a><span class="co"># read contents from API call</span></span>
<span id="cb19-2" class="hljs-ln-code"><a href="#cb19-2"></a>contents <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(<span class="st">"http://api.open-notify.org/astros.json"</span>)</span>
<span id="cb19-3" class="hljs-ln-code"><a href="#cb19-3"></a></span>
<span id="cb19-4" class="hljs-ln-code"><a href="#cb19-4"></a><span class="co"># extract details of the crew</span></span>
<span id="cb19-5" class="hljs-ln-code"><a href="#cb19-5"></a>contents<span class="sc">$</span>people <span class="sc">|&gt;</span></span>
<span id="cb19-6" class="hljs-ln-code"><a href="#cb19-6"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(\(x) tibble<span class="sc">::</span><span class="fu">tibble</span>(<span class="at">name =</span> x<span class="sc">$</span>name, <span class="at">craft =</span> x<span class="sc">$</span>craft)) <span class="sc">|&gt;</span></span>
<span id="cb19-7" class="hljs-ln-code"><a href="#cb19-7"></a>  purrr<span class="sc">::</span><span class="fu">list_rbind</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  name               craft
  &lt;chr&gt;              &lt;chr&gt;
1 Jasmin Moghbeli    ISS  
2 Andreas Mogensen   ISS  
3 Satoshi Furukawa   ISS  
4 Konstantin Borisov ISS  
5 Oleg Kononenko     ISS  
6 Nikolai Chub       ISS  
7 Loral O'Hara       ISS  </code></pre>
</div>
</div>
</section>
<section id="diy-what-is-the-current-position-of-the-international-space-station-can-you-create-a-plot" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">[<strong>DIY</strong>] What is the current position of the International Space Station? Can you create a plot?</h2>
<p><strong>API call: </strong> <a href="http://api.open-notify.org/iss-now.json">http://api.open-notify.org/iss-now.json</a></p>

<div class="fragment fade-in">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>response <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="st">"http://api.open-notify.org/iss-now.json"</span>)</span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="co"># the content is in binary, so convert the response to an R data object</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>content <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(response<span class="sc">$</span>content))</span>
<span id="cb21-5"><a href="#cb21-5"></a></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="co"># get timestamp</span></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="fu">as.POSIXct</span>(content<span class="sc">$</span>timestamp, <span class="at">origin =</span> <span class="st">"1970-01-01"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-02-22 22:15:32 GMT"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># get position coordinates</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>content<span class="sc">$</span>iss_position</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$latitude
[1] "-50.1975"

$longitude
[1] "-31.5457"</code></pre>
</div>
</div>
</div>
<aside><div>
<p><strong>Reference R Script:</strong> <code>2_api_position_of_the_ISS_now.R</code></p>
</div></aside></section>
<section id="diy-what-is-the-current-position-of-the-international-space-station-can-you-create-a-plot-1" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">[<strong>DIY</strong>] What is the current position of the International Space Station? Can you create a plot?</h2>
<p><strong>API call: </strong> <a href="http://api.open-notify.org/iss-now.json">http://api.open-notify.org/iss-now.json</a></p>
<p>We can create a helper function to extract multiple records:</p>
<div class="sourceCode" id="cb25" data-code-line-numbers="|2-4|5|8-10|15|16|17|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb25-1" class="hljs-ln-code"><a href="#cb25-1"></a>iss_position <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb25-2" class="hljs-ln-code"><a href="#cb25-2"></a>  response <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="st">"http://api.open-notify.org/iss-now.json"</span>)</span>
<span id="cb25-3" class="hljs-ln-code"><a href="#cb25-3"></a>  <span class="co"># the content is in binary, so convert the response to an R data object</span></span>
<span id="cb25-4" class="hljs-ln-code"><a href="#cb25-4"></a>  content <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(response<span class="sc">$</span>content))</span>
<span id="cb25-5" class="hljs-ln-code"><a href="#cb25-5"></a>  <span class="fu">Sys.sleep</span>(<span class="dv">1</span>) <span class="co"># pause for 1 second</span></span>
<span id="cb25-6" class="hljs-ln-code"><a href="#cb25-6"></a>  <span class="co"># extract each field and convert to the appropriate data type</span></span>
<span id="cb25-7" class="hljs-ln-code"><a href="#cb25-7"></a>  tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb25-8" class="hljs-ln-code"><a href="#cb25-8"></a>    <span class="at">timestamp =</span> <span class="fu">as.POSIXct</span>(content<span class="sc">$</span>timestamp, <span class="at">origin =</span> <span class="st">"1970-01-01"</span>),</span>
<span id="cb25-9" class="hljs-ln-code"><a href="#cb25-9"></a>    <span class="at">longitude =</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span>iss_position<span class="sc">$</span>longitude),</span>
<span id="cb25-10" class="hljs-ln-code"><a href="#cb25-10"></a>    <span class="at">latitude =</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span>iss_position<span class="sc">$</span>latitude)</span>
<span id="cb25-11" class="hljs-ln-code"><a href="#cb25-11"></a>  )</span>
<span id="cb25-12" class="hljs-ln-code"><a href="#cb25-12"></a>}</span>
<span id="cb25-13" class="hljs-ln-code"><a href="#cb25-13"></a></span>
<span id="cb25-14" class="hljs-ln-code"><a href="#cb25-14"></a><span class="co"># map over the helper function X times, here 10</span></span>
<span id="cb25-15" class="hljs-ln-code"><a href="#cb25-15"></a>iss_position_tbl <span class="ot">&lt;-</span> <span class="fu">seq_len</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span> <span class="co"># number of positions to extract</span></span>
<span id="cb25-16" class="hljs-ln-code"><a href="#cb25-16"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(\(x) <span class="fu">iss_position</span>()) <span class="sc">|&gt;</span></span>
<span id="cb25-17" class="hljs-ln-code"><a href="#cb25-17"></a>  purrr<span class="sc">::</span><span class="fu">list_rbind</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="diy-what-is-the-current-position-of-the-international-space-station-can-you-create-a-plot-2" class="slide level2 smaller scrollable" data-auto-animate="true">
<h2 data-id="quarto-animate-title">[<strong>DIY</strong>] What is the current position of the International Space Station? Can you create a plot?</h2>
<p>Here is a subset of the position of the ISS, capture over a period of 15 minutes, <code>seq_len(15 * 60)</code>:</p>
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">timestamp</th>
<th style="text-align: right;">longitude</th>
<th style="text-align: right;">latitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2024-02-18 20:17:19</td>
<td style="text-align: right;">-94.8448</td>
<td style="text-align: right;">11.1795</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-02-18 20:17:20</td>
<td style="text-align: right;">-94.8072</td>
<td style="text-align: right;">11.1294</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-02-18 20:17:21</td>
<td style="text-align: right;">-94.7697</td>
<td style="text-align: right;">11.0792</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-02-18 20:17:22</td>
<td style="text-align: right;">-94.7134</td>
<td style="text-align: right;">11.0040</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-02-18 20:17:23</td>
<td style="text-align: right;">-94.6759</td>
<td style="text-align: right;">10.9538</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-02-18 20:17:24</td>
<td style="text-align: right;">-94.6385</td>
<td style="text-align: right;">10.9036</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-02-18 20:17:26</td>
<td style="text-align: right;">-94.5823</td>
<td style="text-align: right;">10.8283</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-02-18 20:17:27</td>
<td style="text-align: right;">-94.5448</td>
<td style="text-align: right;">10.7781</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-02-18 20:17:28</td>
<td style="text-align: right;">-94.5074</td>
<td style="text-align: right;">10.7279</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-02-18 20:17:29</td>
<td style="text-align: right;">-94.4513</td>
<td style="text-align: right;">10.6526</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-02-18 20:34:45</td>
<td style="text-align: right;">-50.5240</td>
<td style="text-align: right;">-38.9132</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-02-18 20:34:46</td>
<td style="text-align: right;">-50.4619</td>
<td style="text-align: right;">-38.9522</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-02-18 20:34:47</td>
<td style="text-align: right;">-50.3997</td>
<td style="text-align: right;">-38.9911</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-02-18 20:34:48</td>
<td style="text-align: right;">-50.3063</td>
<td style="text-align: right;">-39.0495</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-02-18 20:34:49</td>
<td style="text-align: right;">-50.2439</td>
<td style="text-align: right;">-39.0883</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-02-18 20:34:50</td>
<td style="text-align: right;">-50.1814</td>
<td style="text-align: right;">-39.1271</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-02-18 20:34:52</td>
<td style="text-align: right;">-50.0876</td>
<td style="text-align: right;">-39.1852</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-02-18 20:34:53</td>
<td style="text-align: right;">-50.0250</td>
<td style="text-align: right;">-39.2239</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-02-18 20:34:54</td>
<td style="text-align: right;">-49.9623</td>
<td style="text-align: right;">-39.2625</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-02-18 20:34:55</td>
<td style="text-align: right;">-49.8681</td>
<td style="text-align: right;">-39.3205</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Note that only the top 10 rows and the bottom 10 rows are displayed, there are an additional 880 rows of data ranging from 2024-02-18 20:17:30 to 2024-02-18 20:34:45.</p>
</div>
</div>
</div>
</section>
<section id="diy-what-is-the-current-position-of-the-international-space-station-can-you-create-a-plot-3" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">[<strong>DIY</strong>] What is the current position of the International Space Station? Can you create a plot?</h2>
<p>Plot the position of the ISS, here using the <a href="https://cran.r-project.org/package=leaflet"><code>{leaflet}</code></a> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb26-1" class="hljs-ln-code"><a href="#cb26-1"></a><span class="co"># create icon from online image</span></span>
<span id="cb26-2" class="hljs-ln-code"><a href="#cb26-2"></a>iss_icon <span class="ot">&lt;-</span> leaflet<span class="sc">::</span><span class="fu">makeIcon</span>(</span>
<span id="cb26-3" class="hljs-ln-code"><a href="#cb26-3"></a>  <span class="at">iconUrl =</span> <span class="st">"https://cdn-icons-png.flaticon.com/512/81/81959.png"</span>, </span>
<span id="cb26-4" class="hljs-ln-code"><a href="#cb26-4"></a>  <span class="at">iconWidth =</span> <span class="dv">15</span>, </span>
<span id="cb26-5" class="hljs-ln-code"><a href="#cb26-5"></a>  <span class="at">iconHeight =</span> <span class="dv">15</span></span>
<span id="cb26-6" class="hljs-ln-code"><a href="#cb26-6"></a>)</span>
<span id="cb26-7" class="hljs-ln-code"><a href="#cb26-7"></a></span>
<span id="cb26-8" class="hljs-ln-code"><a href="#cb26-8"></a><span class="co"># create plot of the positions</span></span>
<span id="cb26-9" class="hljs-ln-code"><a href="#cb26-9"></a>iss_position_tbl <span class="sc">|&gt;</span></span>
<span id="cb26-10" class="hljs-ln-code"><a href="#cb26-10"></a>  leaflet<span class="sc">::</span><span class="fu">leaflet</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-11" class="hljs-ln-code"><a href="#cb26-11"></a>  leaflet<span class="sc">::</span><span class="fu">addTiles</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-12" class="hljs-ln-code"><a href="#cb26-12"></a>  leaflet<span class="sc">::</span><span class="fu">addMarkers</span>(</span>
<span id="cb26-13" class="hljs-ln-code"><a href="#cb26-13"></a>    <span class="at">lng =</span> <span class="sc">~</span>longitude, </span>
<span id="cb26-14" class="hljs-ln-code"><a href="#cb26-14"></a>    <span class="at">lat =</span> <span class="sc">~</span>latitude, </span>
<span id="cb26-15" class="hljs-ln-code"><a href="#cb26-15"></a>    <span class="at">label =</span> <span class="sc">~</span>timestamp,</span>
<span id="cb26-16" class="hljs-ln-code"><a href="#cb26-16"></a>    <span class="at">icon =</span> iss_icon</span>
<span id="cb26-17" class="hljs-ln-code"><a href="#cb26-17"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<aside><div>
<p><strong>Icon source:</strong> <a href="https://www.flaticon.com/free-icon/international-space-station_81959">https://www.flaticon.com/free-icon/international-space-station_81959</a></p>
</div></aside></section>
<section id="diy-what-is-the-current-position-of-the-international-space-station-can-you-create-a-plot-4" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">[<strong>DIY</strong>] What is the current position of the International Space Station? Can you create a plot?</h2>
<center>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-c70818ba633b7261b5b0" style="width:960px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-c70818ba633b7261b5b0">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addMarkers","args":[[11.1795,11.1294,11.0792,11.004,10.9538,10.9036,10.8283,10.7781,10.7279,10.6526,10.6024,10.5521,10.4768,10.4266,10.3763,10.301,10.2507,10.2005,10.1251,10.0748,10.0246,9.949199999999999,9.898899999999999,9.848599999999999,9.773099999999999,9.722899999999999,9.672499999999999,9.622199999999999,9.546799999999999,9.4964,9.446099999999999,9.3706,9.3203,9.2699,9.1944,9.144,9.0937,9.0181,8.967700000000001,8.917299999999999,8.841699999999999,8.7913,8.7408,8.6653,8.6149,8.539300000000001,8.488799999999999,8.4384,8.3628,8.3123,8.261900000000001,8.186199999999999,8.1358,8.0853,8.009600000000001,7.9592,7.9087,7.833,7.7825,7.732,7.6563,7.6058,7.5553,7.4796,7.4291,7.3786,7.3028,7.2523,7.2017,7.126,7.0754,7.0249,6.9744,6.8985,6.8479,6.7974,6.7216,6.671,6.6205,6.5447,6.4941,6.4435,6.3677,6.3171,6.2666,6.1907,6.1401,6.0895,6.0136,5.963,5.8871,5.8365,5.7859,5.71,5.6594,5.5835,5.5329,5.4822,5.4063,5.3557,5.3051,5.2291,5.1785,5.1278,5.0518,5.0012,4.9505,4.8746,4.8239,4.748,4.6973,4.6467,4.5706,4.52,4.4693,4.3933,4.3426,4.292,4.216,4.1653,4.1146,4.0386,3.9879,3.9371,3.8865,3.8104,3.7597,3.709,3.633,3.5823,3.5316,3.4555,3.4048,3.3541,3.278,3.2273,3.1766,3.1005,3.0498,2.999,2.9229,2.8722,2.8214,2.7453,2.6945,2.6438,2.5931,2.517,2.4662,2.4155,2.3394,2.2887,2.2379,2.1618,2.1111,2.0603,1.9842,1.9335,1.8827,1.8066,1.7559,1.7051,1.629,1.5782,1.5275,1.4514,1.4006,1.3499,1.2737,1.223,1.1722,1.0961,1.0453,0.9946,0.9185,0.8677,0.8169,0.7408,0.6901,0.6393,0.5885,0.5124,0.4617,0.4109,0.3347,0.284,0.2332,0.1571,0.1063,0.0555,-0.0206,-0.07140000000000001,-0.1221,-0.1983,-0.249,-0.2998,-0.376,-0.4268,-0.503,-0.5537,-0.6299,-0.6807,-0.7314000000000001,-0.8075,-0.8583,-0.9091,-0.9852,-1.036,-1.0867,-1.1629,-1.2136,-1.2644,-1.3405,-1.3912,-1.4419,-1.4927,-1.5688,-1.6196,-1.6703,-1.7464,-1.7972,-1.8479,-1.924,-1.9748,-2.0255,-2.1016,-2.1777,-2.2285,-2.2792,-2.3553,-2.406,-2.4567,-2.5328,-2.5835,-2.6342,-2.7103,-2.761,-2.8118,-2.8878,-2.9386,-3.0146,-3.0653,-3.116,-3.1667,-3.2428,-3.2935,-3.3442,-3.4203,-3.471,-3.5217,-3.5977,-3.6484,-3.6991,-3.7752,-3.8258,-3.9019,-3.9525,-4.0032,-4.0792,-4.1299,-4.1806,-4.2566,-4.3073,-4.3579,-4.4339,-4.4846,-4.5352,-4.6112,-4.6618,-4.7125,-4.7884,-4.8391,-4.8897,-4.9657,-5.0163,-5.0669,-5.1429,-5.1935,-5.2441,-5.32,-5.3706,-5.4212,-5.4971,-5.5477,-5.5983,-5.6742,-5.7248,-5.7754,-5.826,-5.9019,-5.9524,-6.003,-6.0789,-6.1295,-6.18,-6.2559,-6.3064,-6.3569,-6.4328,-6.4833,-6.5591,-6.6097,-6.6855,-6.736,-6.7865,-6.8623,-6.9128,-6.9633,-7.0391,-7.0896,-7.1401,-7.2158,-7.2663,-7.3168,-7.3925,-7.443,-7.4935,-7.5691,-7.6196,-7.6701,-7.7458,-7.7962,-7.8466,-7.9223,-7.9727,-8.023199999999999,-8.098800000000001,-8.1492,-8.1996,-8.2753,-8.325699999999999,-8.376099999999999,-8.451700000000001,-8.5021,-8.5525,-8.628,-8.6785,-8.7288,-8.804399999999999,-8.854699999999999,-8.905099999999999,-8.980600000000001,-9.030900000000001,-9.081300000000001,-9.1568,-9.2072,-9.2575,-9.333,-9.3833,-9.4336,-9.5091,-9.5593,-9.6097,-9.6851,-9.7355,-9.7857,-9.8611,-9.9114,-9.961600000000001,-10.0119,-10.0873,-10.1375,-10.1877,-10.263,-10.3133,-10.3635,-10.4388,-10.489,-10.5392,-10.6145,-10.6647,-10.7149,-10.7901,-10.8403,-10.8904,-10.9656,-11.0158,-11.0659,-11.1411,-11.1912,-11.2413,-11.3165,-11.3666,-11.4167,-11.4918,-11.5419,-11.617,-11.6671,-11.7172,-11.7672,-11.8423,-11.8923,-11.9674,-12.0174,-12.0674,-12.1424,-12.2174,-12.2674,-12.3424,-12.3924,-12.4673,-12.5173,-12.5673,-12.6422,-12.6921,-12.742,-12.8169,-12.8668,-12.9416,-12.9916,-13.0415,-13.1163,-13.1661,-13.216,-13.2908,-13.3406,-13.3904,-13.4652,-13.515,-13.5648,-13.6395,-13.6893,-13.7391,-13.8138,-13.8635,-13.9133,-13.9879,-14.0376,-14.0874,-14.1619,-14.2116,-14.2613,-14.311,-14.3855,-14.4352,-14.4849,-14.5594,-14.609,-14.6586,-14.7331,-14.7827,-14.8323,-14.9067,-14.9563,-15.0059,-15.0803,-15.1298,-15.1794,-15.2537,-15.3032,-15.3527,-15.427,-15.4765,-15.526,-15.6003,-15.6497,-15.6992,-15.7734,-15.8228,-15.8722,-15.9464,-16.144,-16.218,-16.2674,-16.3414,-16.3908,-16.4648,-16.5141,-16.5634,-16.6374,-16.6867,-16.7359,-16.8099,-16.8591,-16.9084,-16.9576,-17.0314,-17.0806,-17.1298,-17.2036,-17.2528,-17.302,-17.3757,-17.4249,-17.4986,-17.5477,-17.5968,-17.6705,-17.7195,-17.7686,-17.8177,-17.8912,-17.9403,-17.9893,-18.0628,-18.1118,-18.1608,-18.2343,-18.2832,-18.3567,-18.4056,-18.479,-18.528,-18.5768,-18.6502,-18.6991,-18.7724,-18.8212,-18.8701,-18.9433,-18.9921,-19.0409,-19.1141,-19.1629,-19.2116,-19.2604,-19.3335,-19.3823,-19.431,-19.504,-19.5527,-19.6013,-19.6743,-19.723,-19.7716,-19.8445,-19.8931,-19.9417,-20.0146,-20.0632,-20.1118,-20.1846,-20.2331,-20.2816,-20.3544,-20.4028,-20.4513,-20.524,-20.5724,-20.6209,-20.6935,-20.7419,-20.7903,-20.8628,-20.9112,-20.9595,-21.032,-21.0803,-21.1286,-21.201,-21.2493,-21.2976,-21.3699,-21.4181,-21.4663,-21.5386,-21.5868,-21.6349,-21.7071,-21.7552,-21.8034,-21.8755,-21.9236,-21.9717,-22.0438,-22.0918,-22.1398,-22.2118,-22.2598,-22.3078,-22.3797,-22.4277,-22.4756,-22.5475,-22.5954,-22.6433,-22.6911,-22.7629,-22.8108,-22.8586,-22.9542,-23.0259,-23.0736,-23.1214,-23.1691,-23.2407,-23.2884,-23.336,-23.4075,-23.4553,-23.5029,-23.5743,-23.6219,-23.6695,-23.7408,-23.7884,-23.836,-23.9073,-23.9548,-24.0023,-24.0734,-24.1209,-24.192,-24.2394,-24.2868,-24.3578,-24.4051,-24.4525,-24.5235,-24.5707,-24.618,-24.6889,-24.7361,-24.7834,-24.8542,-24.9014,-24.9485,-25.0193,-25.0664,-25.1135,-25.1841,-25.2312,-25.2783,-25.3488,-25.3958,-25.4428,-25.5133,-25.5602,-25.6072,-25.6776,-25.7245,-25.7713,-25.8416,-25.8885,-25.9352,-26.0054,-26.0522,-26.0989,-26.1691,-26.2158,-26.2625,-26.3325,-26.3791,-26.4257,-26.4724,-26.5423,-26.5888,-26.6354,-26.7052,-26.7518,-26.7982,-26.8679,-26.9144,-26.9608,-27.0304,-27.0768,-27.1232,-27.1927,-27.239,-27.2853,-27.3547,-27.401,-27.4472,-27.5165,-27.5627,-27.6089,-27.6781,-27.7242,-27.7703,-27.8395,-27.8856,-27.9316,-28.0006,-28.0466,-28.0926,-28.1616,-28.2075,-28.2534,-28.3222,-28.3681,-28.4139,-28.4826,-28.5284,-28.5741,-28.6427,-28.6884,-28.7341,-28.8026,-28.8482,-28.8938,-28.9622,-29.0078,-29.0534,-29.1217,-29.1672,-29.2128,-29.2809,-29.3264,-29.3718,-29.4399,-29.4853,-29.5533,-29.5986,-29.6438,-29.7117,-29.757,-29.8022,-29.87,-29.9151,-29.9602,-30.0279,-30.0729,-30.118,-30.1855,-30.2305,-30.2755,-30.3204,-30.3878,-30.4327,-30.4776,-30.5449,-30.5897,-30.6345,-30.7017,-30.7464,-30.7912,-30.8582,-30.9029,-30.9475,-31.0144,-31.059,-31.1035,-31.1703,-31.2148,-31.2593,-31.326,-31.3704,-31.4148,-31.4813,-31.5256,-31.5699,-31.6143,-31.6806,-31.7249,-31.7691,-31.8354,-31.8796,-31.9237,-31.9898,-32.0339,-32.0779,-32.144,-32.1879,-32.2319,-32.2977,-32.3416,-32.3855,-32.4512,-32.495,-32.5388,-32.6044,-32.6481,-32.7137,-32.7574,-32.801,-32.8446,-32.9099,-32.9535,-33.0187,-33.0622,-33.1056,-33.1707,-33.2141,-33.2575,-33.3225,-33.3658,-33.409,-33.4738,-33.517,-33.5602,-33.6248,-33.6679,-33.711,-33.7755,-33.8185,-33.8614,-33.9258,-33.9687,-34.0116,-34.0544,-34.1186,-34.1614,-34.2041,-34.2682,-34.3109,-34.3535,-34.4174,-34.46,-34.5238,-34.5663,-34.63,-34.6725,-34.7149,-34.7573,-34.8208,-34.8631,-34.9053,-34.9687,-35.0109,-35.0741,-35.1163,-35.1584,-35.2215,-35.2635,-35.3055,-35.3684,-35.4103,-35.4522,-35.515,-35.5567,-35.5985,-35.6611,-35.7029,-35.7445,-35.807,-35.8486,-35.8902,-35.9317,-35.9939,-36.0354,-36.0768,-36.1389,-36.1803,-36.2216,-36.2835,-36.3247,-36.3659,-36.4277,-36.4688,-36.5099,-36.5715,-36.6125,-36.6535,-36.7149,-36.7558,-36.7966,-36.8579,-36.8986,-36.9394,-37.0005,-37.0411,-37.0818,-37.1426,-37.1832,-37.2237,-37.2844,-37.3248,-37.3652,-37.4258,-37.4661,-37.5064,-37.5667,-37.6069,-37.647,-37.6872,-37.7473,-37.7873,-37.8273,-37.8872,-37.9272,-37.967,-38.0268,-38.0666,-38.1063,-38.1659,-38.2055,-38.2452,-38.3046,-38.3441,-38.3836,-38.4428,-38.4822,-38.5413,-38.5806,-38.6395,-38.6787,-38.7179,-38.7766,-38.8157,-38.8547,-38.9132,-38.9522,-38.9911,-39.0495,-39.0883,-39.1271,-39.1852,-39.2239,-39.2625,-39.3205],[-94.84480000000001,-94.80719999999999,-94.7697,-94.71339999999999,-94.6759,-94.63849999999999,-94.5823,-94.5448,-94.5074,-94.4513,-94.4139,-94.37649999999999,-94.3205,-94.2831,-94.2458,-94.18989999999999,-94.15260000000001,-94.1153,-94.0594,-94.0222,-93.9849,-93.92910000000001,-93.89190000000001,-93.85469999999999,-93.79900000000001,-93.76179999999999,-93.7246,-93.6875,-93.6319,-93.59480000000001,-93.55759999999999,-93.502,-93.465,-93.42789999999999,-93.3724,-93.33540000000001,-93.2984,-93.24290000000001,-93.2059,-93.16889999999999,-93.1134,-93.0765,-93.0395,-92.9842,-92.9473,-92.89190000000001,-92.85509999999999,-92.8182,-92.76300000000001,-92.7261,-92.6893,-92.634,-92.5972,-92.5605,-92.50530000000001,-92.46850000000001,-92.43170000000001,-92.3766,-92.3399,-92.3032,-92.24809999999999,-92.2114,-92.1748,-92.1198,-92.0831,-92.04640000000001,-91.9915,-91.95489999999999,-91.9182,-91.8633,-91.8267,-91.7901,-91.75360000000001,-91.6987,-91.6621,-91.62560000000001,-91.57080000000001,-91.5342,-91.49769999999999,-91.443,-91.40649999999999,-91.37,-91.31529999999999,-91.27889999999999,-91.2424,-91.18770000000001,-91.15130000000001,-91.11490000000001,-91.06019999999999,-91.02379999999999,-90.9692,-90.9328,-90.8964,-90.8419,-90.80549999999999,-90.751,-90.7146,-90.67829999999999,-90.6238,-90.58750000000001,-90.55119999999999,-90.4967,-90.46040000000001,-90.4241,-90.36969999999999,-90.3334,-90.2971,-90.2427,-90.20650000000001,-90.1521,-90.1159,-90.0796,-90.0253,-89.98909999999999,-89.9529,-89.8986,-89.86239999999999,-89.8262,-89.7719,-89.73569999999999,-89.6995,-89.64530000000001,-89.6091,-89.5729,-89.5368,-89.48260000000001,-89.4464,-89.41030000000001,-89.3561,-89.31999999999999,-89.2839,-89.22969999999999,-89.1936,-89.1575,-89.1033,-89.0672,-89.0311,-88.977,-88.9409,-88.90479999999999,-88.8507,-88.8146,-88.77849999999999,-88.7244,-88.6883,-88.6523,-88.61620000000001,-88.5622,-88.5262,-88.4901,-88.4361,-88.40000000000001,-88.364,-88.31,-88.274,-88.2379,-88.18389999999999,-88.14790000000001,-88.11190000000001,-88.0579,-88.0219,-87.9859,-87.9319,-87.8959,-87.8599,-87.806,-87.77,-87.73399999999999,-87.68000000000001,-87.64400000000001,-87.608,-87.55410000000001,-87.5181,-87.48220000000001,-87.4282,-87.3922,-87.3562,-87.3023,-87.2663,-87.2304,-87.1944,-87.1405,-87.1045,-87.0685,-87.0146,-86.9786,-86.9427,-86.8887,-86.8528,-86.8168,-86.7629,-86.7269,-86.6909,-86.637,-86.601,-86.5651,-86.5111,-86.4751,-86.4211,-86.3852,-86.3312,-86.29519999999999,-86.2593,-86.20529999999999,-86.1694,-86.13339999999999,-86.07940000000001,-86.04340000000001,-86.00749999999999,-85.95350000000001,-85.9175,-85.88160000000001,-85.8276,-85.7916,-85.7557,-85.7197,-85.6657,-85.6297,-85.5937,-85.5397,-85.50369999999999,-85.46769999999999,-85.41370000000001,-85.3777,-85.3417,-85.2877,-85.2337,-85.19759999999999,-85.16160000000001,-85.10760000000001,-85.0716,-85.0355,-84.9815,-84.9455,-84.90940000000001,-84.8554,-84.8193,-84.7833,-84.72920000000001,-84.6931,-84.639,-84.60299999999999,-84.5669,-84.5308,-84.47669999999999,-84.4406,-84.4045,-84.35039999999999,-84.3142,-84.27809999999999,-84.224,-84.1878,-84.15170000000001,-84.0975,-84.06140000000001,-84.0072,-83.971,-83.9349,-83.8806,-83.8445,-83.8083,-83.75409999999999,-83.7179,-83.68170000000001,-83.62739999999999,-83.5912,-83.55500000000001,-83.50069999999999,-83.4645,-83.4282,-83.37390000000001,-83.3377,-83.3014,-83.247,-83.21080000000001,-83.17449999999999,-83.12009999999999,-83.0838,-83.0475,-82.9931,-82.9568,-82.9205,-82.866,-82.8297,-82.7933,-82.7388,-82.7025,-82.6661,-82.6297,-82.5752,-82.53879999999999,-82.50239999999999,-82.4478,-82.4114,-82.375,-82.3203,-82.2839,-82.2475,-82.19280000000001,-82.1563,-82.1016,-82.0651,-82.0103,-81.9738,-81.93729999999999,-81.88249999999999,-81.846,-81.8095,-81.7546,-81.71810000000001,-81.6815,-81.6266,-81.59,-81.5534,-81.49850000000001,-81.4619,-81.4252,-81.3702,-81.3336,-81.29689999999999,-81.2419,-81.2052,-81.16849999999999,-81.1134,-81.0767,-81.0399,-80.98480000000001,-80.94799999999999,-80.91119999999999,-80.85599999999999,-80.8193,-80.7824,-80.7272,-80.69029999999999,-80.65349999999999,-80.59820000000001,-80.5613,-80.5244,-80.46899999999999,-80.43210000000001,-80.3952,-80.3398,-80.3028,-80.2659,-80.21040000000001,-80.1734,-80.13630000000001,-80.0808,-80.0438,-80.0067,-79.9511,-79.914,-79.87690000000001,-79.8212,-79.78400000000001,-79.7469,-79.69119999999999,-79.654,-79.6168,-79.5796,-79.52379999999999,-79.4866,-79.4494,-79.3935,-79.3562,-79.3189,-79.26300000000001,-79.2257,-79.1883,-79.1323,-79.0949,-79.0575,-79.0014,-78.964,-78.92659999999999,-78.8704,-78.833,-78.7955,-78.7392,-78.7017,-78.66419999999999,-78.6079,-78.5703,-78.53279999999999,-78.4764,-78.4388,-78.3823,-78.3446,-78.3069,-78.2692,-78.2127,-78.175,-78.11839999999999,-78.0806,-78.0428,-77.98609999999999,-77.9294,-77.89149999999999,-77.8347,-77.79689999999999,-77.73999999999999,-77.7021,-77.6641,-77.60720000000001,-77.5692,-77.5313,-77.4742,-77.4362,-77.37909999999999,-77.34099999999999,-77.30289999999999,-77.2458,-77.2076,-77.1695,-77.1122,-77.074,-77.03579999999999,-76.9785,-76.9402,-76.9019,-76.8445,-76.8061,-76.76779999999999,-76.7103,-76.67189999999999,-76.6335,-76.5759,-76.53740000000001,-76.499,-76.44119999999999,-76.4027,-76.3642,-76.3257,-76.26779999999999,-76.22920000000001,-76.1906,-76.1326,-76.09399999999999,-76.0553,-75.99720000000001,-75.9585,-75.9198,-75.8616,-75.8228,-75.78400000000001,-75.7257,-75.68689999999999,-75.648,-75.5896,-75.55070000000001,-75.5117,-75.4533,-75.41419999999999,-75.37520000000001,-75.31659999999999,-75.2775,-75.2384,-75.1797,-75.14060000000001,-75.1014,-75.04259999999999,-74.88549999999999,-74.8266,-74.7872,-74.7282,-74.6888,-74.6296,-74.5902,-74.55070000000001,-74.4914,-74.45180000000001,-74.4123,-74.35290000000001,-74.3133,-74.2736,-74.23399999999999,-74.17440000000001,-74.1347,-74.095,-74.03530000000001,-73.99550000000001,-73.95569999999999,-73.8959,-73.85599999999999,-73.7962,-73.75620000000001,-73.7162,-73.6562,-73.61620000000001,-73.5762,-73.5361,-73.4759,-73.4358,-73.3956,-73.3353,-73.29510000000001,-73.25490000000001,-73.19450000000001,-73.1542,-73.0936,-73.05329999999999,-72.9927,-72.9522,-72.9118,-72.851,-72.8105,-72.7497,-72.70910000000001,-72.66849999999999,-72.6075,-72.5668,-72.5261,-72.465,-72.4242,-72.38339999999999,-72.3426,-72.2813,-72.24039999999999,-72.1995,-72.13809999999999,-72.0971,-72.0561,-71.9945,-71.9534,-71.9123,-71.8506,-71.8094,-71.76819999999999,-71.7063,-71.66500000000001,-71.6237,-71.5617,-71.52030000000001,-71.4789,-71.41670000000001,-71.3753,-71.33369999999999,-71.2714,-71.2299,-71.18819999999999,-71.1258,-71.08410000000001,-71.0424,-70.9798,-70.938,-70.89619999999999,-70.8334,-70.7915,-70.7496,-70.6867,-70.6447,-70.6026,-70.53959999999999,-70.4975,-70.4554,-70.3921,-70.34990000000001,-70.3077,-70.2443,-70.202,-70.1596,-70.096,-70.0536,-70.0112,-69.9474,-69.9049,-69.8623,-69.7984,-69.75579999999999,-69.7131,-69.649,-69.6063,-69.5635,-69.4992,-69.4564,-69.4134,-69.37050000000001,-69.306,-69.26300000000001,-69.2199,-69.1337,-69.0689,-69.0258,-68.9825,-68.9393,-68.87430000000001,-68.8309,-68.78749999999999,-68.72239999999999,-68.6788,-68.6353,-68.56999999999999,-68.5264,-68.48269999999999,-68.41719999999999,-68.37350000000001,-68.3297,-68.264,-68.2201,-68.17619999999999,-68.1103,-68.0664,-68.0004,-67.9563,-67.9122,-67.846,-67.8018,-67.7576,-67.69110000000001,-67.6469,-67.60250000000001,-67.5359,-67.4915,-67.447,-67.3802,-67.3356,-67.291,-67.224,-67.1793,-67.13460000000001,-67.06740000000001,-67.02249999999999,-66.9777,-66.91030000000001,-66.8653,-66.8203,-66.7527,-66.7076,-66.66249999999999,-66.5947,-66.54949999999999,-66.5042,-66.4362,-66.3908,-66.3454,-66.2773,-66.23180000000001,-66.1862,-66.1178,-66.0722,-66.0265,-65.9579,-65.9121,-65.8663,-65.82040000000001,-65.75149999999999,-65.7056,-65.65949999999999,-65.5904,-65.54430000000001,-65.49809999999999,-65.4288,-65.3826,-65.33629999999999,-65.2667,-65.22029999999999,-65.1739,-65.1041,-65.05759999999999,-65.011,-64.941,-64.8944,-64.8476,-64.7774,-64.7306,-64.6837,-64.6133,-64.5663,-64.5192,-64.4485,-64.4014,-64.35420000000001,-64.2833,-64.236,-64.18859999999999,-64.11750000000001,-64.0701,-64.02249999999999,-63.9512,-63.9036,-63.856,-63.7844,-63.7366,-63.6888,-63.617,-63.5691,-63.5211,-63.4491,-63.401,-63.3529,-63.2806,-63.2323,-63.1841,-63.1115,-63.0631,-63.0145,-62.9418,-62.8932,-62.8446,-62.7715,-62.7227,-62.6495,-62.6007,-62.5517,-62.4783,-62.4293,-62.3802,-62.3065,-62.2573,-62.208,-62.1341,-62.0847,-62.0353,-61.9611,-61.9116,-61.862,-61.8124,-61.7378,-61.6881,-61.6382,-61.5635,-61.5135,-61.4635,-61.3884,-61.3383,-61.2882,-61.2128,-61.1625,-61.1122,-61.0366,-60.9862,-60.9357,-60.8598,-60.8092,-60.7585,-60.6823,-60.6315,-60.5806,-60.5043,-60.4533,-60.4022,-60.351,-60.2743,-60.2231,-60.1718,-60.0946,-60.0432,-59.9917,-59.9143,-59.8627,-59.8111,-59.7334,-59.6816,-59.6298,-59.5519,-59.4999,-59.4478,-59.3697,-59.3175,-59.2652,-59.1868,-59.1343,-59.0556,-59.0031,-58.9505,-58.8979,-58.8188,-58.766,-58.6868,-58.6338,-58.5809,-58.5013,-58.4483,-58.3951,-58.3151,-58.2618,-58.2084,-58.1283,-58.0748,-58.0213,-57.9408,-57.8871,-57.8334,-57.7526,-57.6987,-57.6448,-57.5637,-57.5096,-57.4554,-57.4012,-57.3198,-57.2654,-57.211,-57.1292,-57.0746,-57.02,-56.9379,-56.8831,-56.8008,-56.7459,-56.6633,-56.6082,-56.553,-56.4977,-56.4148,-56.3594,-56.304,-56.2208,-56.1652,-56.0817,-56.0259,-55.9701,-55.8863,-55.8303,-55.7743,-55.6902,-55.634,-55.5778,-55.4933,-55.4369,-55.3804,-55.2956,-55.239,-55.1823,-55.0972,-55.0403,-54.9834,-54.9264,-54.8408,-54.7837,-54.7265,-54.6405,-54.5832,-54.5258,-54.4395,-54.3819,-54.3243,-54.2376,-54.1798,-54.1219,-54.035,-53.9769,-53.9188,-53.8314,-53.7732,-53.7148,-53.6272,-53.5687,-53.5101,-53.4221,-53.3634,-53.3045,-53.2162,-53.1572,-53.0981,-53.0094,-52.9502,-52.8909,-52.8018,-52.7424,-52.6828,-52.5934,-52.5337,-52.4739,-52.4141,-52.3242,-52.2642,-52.2041,-52.1139,-52.0536,-51.9933,-51.9026,-51.8421,-51.7815,-51.6905,-51.6298,-51.5689,-51.4775,-51.4165,-51.3554,-51.2637,-51.2024,-51.1104,-51.049,-50.9567,-50.8951,-50.8335,-50.7408,-50.6789,-50.617,-50.524,-50.4619,-50.3997,-50.3063,-50.2439,-50.1814,-50.0876,-50.025,-49.9623,-49.8681],{"iconUrl":{"data":"https://cdn-icons-png.flaticon.com/512/81/81959.png","index":0},"iconWidth":15,"iconHeight":15},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["2024-02-18 20:17:19","2024-02-18 20:17:20","2024-02-18 20:17:21","2024-02-18 20:17:22","2024-02-18 20:17:23","2024-02-18 20:17:24","2024-02-18 20:17:26","2024-02-18 20:17:27","2024-02-18 20:17:28","2024-02-18 20:17:29","2024-02-18 20:17:30","2024-02-18 20:17:31","2024-02-18 20:17:33","2024-02-18 20:17:34","2024-02-18 20:17:35","2024-02-18 20:17:36","2024-02-18 20:17:37","2024-02-18 20:17:38","2024-02-18 20:17:40","2024-02-18 20:17:41","2024-02-18 20:17:42","2024-02-18 20:17:44","2024-02-18 20:17:45","2024-02-18 20:17:46","2024-02-18 20:17:47","2024-02-18 20:17:48","2024-02-18 20:17:49","2024-02-18 20:17:50","2024-02-18 20:17:52","2024-02-18 20:17:53","2024-02-18 20:17:54","2024-02-18 20:17:55","2024-02-18 20:17:56","2024-02-18 20:17:57","2024-02-18 20:17:59","2024-02-18 20:18:00","2024-02-18 20:18:01","2024-02-18 20:18:02","2024-02-18 20:18:03","2024-02-18 20:18:04","2024-02-18 20:18:06","2024-02-18 20:18:07","2024-02-18 20:18:08","2024-02-18 20:18:09","2024-02-18 20:18:10","2024-02-18 20:18:12","2024-02-18 20:18:13","2024-02-18 20:18:14","2024-02-18 20:18:15","2024-02-18 20:18:16","2024-02-18 20:18:17","2024-02-18 20:18:19","2024-02-18 20:18:20","2024-02-18 20:18:21","2024-02-18 20:18:22","2024-02-18 20:18:23","2024-02-18 20:18:24","2024-02-18 20:18:26","2024-02-18 20:18:27","2024-02-18 20:18:28","2024-02-18 20:18:29","2024-02-18 20:18:30","2024-02-18 20:18:31","2024-02-18 20:18:33","2024-02-18 20:18:34","2024-02-18 20:18:35","2024-02-18 20:18:36","2024-02-18 20:18:37","2024-02-18 20:18:38","2024-02-18 20:18:40","2024-02-18 20:18:41","2024-02-18 20:18:42","2024-02-18 20:18:43","2024-02-18 20:18:44","2024-02-18 20:18:45","2024-02-18 20:18:46","2024-02-18 20:18:48","2024-02-18 20:18:49","2024-02-18 20:18:50","2024-02-18 20:18:51","2024-02-18 20:18:52","2024-02-18 20:18:53","2024-02-18 20:18:55","2024-02-18 20:18:56","2024-02-18 20:18:57","2024-02-18 20:18:58","2024-02-18 20:18:59","2024-02-18 20:19:00","2024-02-18 20:19:02","2024-02-18 20:19:03","2024-02-18 20:19:04","2024-02-18 20:19:05","2024-02-18 20:19:06","2024-02-18 20:19:08","2024-02-18 20:19:09","2024-02-18 20:19:10","2024-02-18 20:19:11","2024-02-18 20:19:12","2024-02-18 20:19:14","2024-02-18 20:19:15","2024-02-18 20:19:16","2024-02-18 20:19:17","2024-02-18 20:19:18","2024-02-18 20:19:19","2024-02-18 20:19:21","2024-02-18 20:19:22","2024-02-18 20:19:23","2024-02-18 20:19:24","2024-02-18 20:19:25","2024-02-18 20:19:27","2024-02-18 20:19:28","2024-02-18 20:19:29","2024-02-18 20:19:30","2024-02-18 20:19:31","2024-02-18 20:19:32","2024-02-18 20:19:34","2024-02-18 20:19:35","2024-02-18 20:19:36","2024-02-18 20:19:37","2024-02-18 20:19:38","2024-02-18 20:19:39","2024-02-18 20:19:41","2024-02-18 20:19:42","2024-02-18 20:19:43","2024-02-18 20:19:44","2024-02-18 20:19:45","2024-02-18 20:19:46","2024-02-18 20:19:47","2024-02-18 20:19:49","2024-02-18 20:19:50","2024-02-18 20:19:51","2024-02-18 20:19:52","2024-02-18 20:19:53","2024-02-18 20:19:54","2024-02-18 20:19:56","2024-02-18 20:19:57","2024-02-18 20:19:58","2024-02-18 20:19:59","2024-02-18 20:20:00","2024-02-18 20:20:01","2024-02-18 20:20:03","2024-02-18 20:20:04","2024-02-18 20:20:05","2024-02-18 20:20:06","2024-02-18 20:20:07","2024-02-18 20:20:08","2024-02-18 20:20:09","2024-02-18 20:20:11","2024-02-18 20:20:12","2024-02-18 20:20:13","2024-02-18 20:20:14","2024-02-18 20:20:15","2024-02-18 20:20:16","2024-02-18 20:20:18","2024-02-18 20:20:19","2024-02-18 20:20:20","2024-02-18 20:20:21","2024-02-18 20:20:22","2024-02-18 20:20:23","2024-02-18 20:20:25","2024-02-18 20:20:26","2024-02-18 20:20:27","2024-02-18 20:20:28","2024-02-18 20:20:29","2024-02-18 20:20:30","2024-02-18 20:20:32","2024-02-18 20:20:33","2024-02-18 20:20:34","2024-02-18 20:20:35","2024-02-18 20:20:36","2024-02-18 20:20:37","2024-02-18 20:20:39","2024-02-18 20:20:40","2024-02-18 20:20:41","2024-02-18 20:20:42","2024-02-18 20:20:43","2024-02-18 20:20:44","2024-02-18 20:20:46","2024-02-18 20:20:47","2024-02-18 20:20:48","2024-02-18 20:20:49","2024-02-18 20:20:50","2024-02-18 20:20:51","2024-02-18 20:20:52","2024-02-18 20:20:54","2024-02-18 20:20:55","2024-02-18 20:20:56","2024-02-18 20:20:57","2024-02-18 20:20:58","2024-02-18 20:20:59","2024-02-18 20:21:01","2024-02-18 20:21:02","2024-02-18 20:21:03","2024-02-18 20:21:04","2024-02-18 20:21:05","2024-02-18 20:21:06","2024-02-18 20:21:08","2024-02-18 20:21:09","2024-02-18 20:21:10","2024-02-18 20:21:11","2024-02-18 20:21:13","2024-02-18 20:21:14","2024-02-18 20:21:15","2024-02-18 20:21:16","2024-02-18 20:21:17","2024-02-18 20:21:18","2024-02-18 20:21:20","2024-02-18 20:21:21","2024-02-18 20:21:22","2024-02-18 20:21:23","2024-02-18 20:21:24","2024-02-18 20:21:25","2024-02-18 20:21:27","2024-02-18 20:21:28","2024-02-18 20:21:29","2024-02-18 20:21:30","2024-02-18 20:21:31","2024-02-18 20:21:32","2024-02-18 20:21:33","2024-02-18 20:21:35","2024-02-18 20:21:36","2024-02-18 20:21:37","2024-02-18 20:21:38","2024-02-18 20:21:39","2024-02-18 20:21:40","2024-02-18 20:21:42","2024-02-18 20:21:43","2024-02-18 20:21:44","2024-02-18 20:21:45","2024-02-18 20:21:47","2024-02-18 20:21:48","2024-02-18 20:21:49","2024-02-18 20:21:50","2024-02-18 20:21:51","2024-02-18 20:21:52","2024-02-18 20:21:54","2024-02-18 20:21:55","2024-02-18 20:21:56","2024-02-18 20:21:57","2024-02-18 20:21:58","2024-02-18 20:22:00","2024-02-18 20:22:01","2024-02-18 20:22:02","2024-02-18 20:22:03","2024-02-18 20:22:04","2024-02-18 20:22:06","2024-02-18 20:22:07","2024-02-18 20:22:08","2024-02-18 20:22:09","2024-02-18 20:22:10","2024-02-18 20:22:12","2024-02-18 20:22:13","2024-02-18 20:22:14","2024-02-18 20:22:15","2024-02-18 20:22:16","2024-02-18 20:22:18","2024-02-18 20:22:19","2024-02-18 20:22:20","2024-02-18 20:22:21","2024-02-18 20:22:22","2024-02-18 20:22:23","2024-02-18 20:22:25","2024-02-18 20:22:26","2024-02-18 20:22:27","2024-02-18 20:22:28","2024-02-18 20:22:29","2024-02-18 20:22:30","2024-02-18 20:22:32","2024-02-18 20:22:33","2024-02-18 20:22:34","2024-02-18 20:22:35","2024-02-18 20:22:36","2024-02-18 20:22:37","2024-02-18 20:22:39","2024-02-18 20:22:40","2024-02-18 20:22:41","2024-02-18 20:22:42","2024-02-18 20:22:43","2024-02-18 20:22:44","2024-02-18 20:22:46","2024-02-18 20:22:47","2024-02-18 20:22:48","2024-02-18 20:22:49","2024-02-18 20:22:50","2024-02-18 20:22:51","2024-02-18 20:22:53","2024-02-18 20:22:54","2024-02-18 20:22:55","2024-02-18 20:22:56","2024-02-18 20:22:57","2024-02-18 20:22:58","2024-02-18 20:22:59","2024-02-18 20:23:01","2024-02-18 20:23:02","2024-02-18 20:23:03","2024-02-18 20:23:04","2024-02-18 20:23:05","2024-02-18 20:23:06","2024-02-18 20:23:08","2024-02-18 20:23:09","2024-02-18 20:23:10","2024-02-18 20:23:11","2024-02-18 20:23:13","2024-02-18 20:23:14","2024-02-18 20:23:15","2024-02-18 20:23:16","2024-02-18 20:23:17","2024-02-18 20:23:18","2024-02-18 20:23:20","2024-02-18 20:23:21","2024-02-18 20:23:22","2024-02-18 20:23:23","2024-02-18 20:23:24","2024-02-18 20:23:25","2024-02-18 20:23:27","2024-02-18 20:23:28","2024-02-18 20:23:29","2024-02-18 20:23:30","2024-02-18 20:23:31","2024-02-18 20:23:32","2024-02-18 20:23:34","2024-02-18 20:23:35","2024-02-18 20:23:36","2024-02-18 20:23:37","2024-02-18 20:23:38","2024-02-18 20:23:39","2024-02-18 20:23:41","2024-02-18 20:23:42","2024-02-18 20:23:43","2024-02-18 20:23:44","2024-02-18 20:23:45","2024-02-18 20:23:46","2024-02-18 20:23:48","2024-02-18 20:23:49","2024-02-18 20:23:50","2024-02-18 20:23:51","2024-02-18 20:23:52","2024-02-18 20:23:53","2024-02-18 20:23:55","2024-02-18 20:23:56","2024-02-18 20:23:57","2024-02-18 20:23:58","2024-02-18 20:23:59","2024-02-18 20:24:00","2024-02-18 20:24:02","2024-02-18 20:24:03","2024-02-18 20:24:04","2024-02-18 20:24:05","2024-02-18 20:24:06","2024-02-18 20:24:07","2024-02-18 20:24:09","2024-02-18 20:24:10","2024-02-18 20:24:11","2024-02-18 20:24:12","2024-02-18 20:24:13","2024-02-18 20:24:14","2024-02-18 20:24:16","2024-02-18 20:24:17","2024-02-18 20:24:18","2024-02-18 20:24:19","2024-02-18 20:24:20","2024-02-18 20:24:21","2024-02-18 20:24:22","2024-02-18 20:24:24","2024-02-18 20:24:25","2024-02-18 20:24:26","2024-02-18 20:24:27","2024-02-18 20:24:28","2024-02-18 20:24:29","2024-02-18 20:24:31","2024-02-18 20:24:32","2024-02-18 20:24:33","2024-02-18 20:24:34","2024-02-18 20:24:35","2024-02-18 20:24:36","2024-02-18 20:24:38","2024-02-18 20:24:39","2024-02-18 20:24:40","2024-02-18 20:24:41","2024-02-18 20:24:42","2024-02-18 20:24:43","2024-02-18 20:24:45","2024-02-18 20:24:46","2024-02-18 20:24:47","2024-02-18 20:24:48","2024-02-18 20:24:49","2024-02-18 20:24:51","2024-02-18 20:24:52","2024-02-18 20:24:53","2024-02-18 20:24:54","2024-02-18 20:24:55","2024-02-18 20:24:56","2024-02-18 20:24:58","2024-02-18 20:24:59","2024-02-18 20:25:00","2024-02-18 20:25:01","2024-02-18 20:25:03","2024-02-18 20:25:04","2024-02-18 20:25:05","2024-02-18 20:25:06","2024-02-18 20:25:08","2024-02-18 20:25:09","2024-02-18 20:25:10","2024-02-18 20:25:11","2024-02-18 20:25:12","2024-02-18 20:25:13","2024-02-18 20:25:15","2024-02-18 20:25:16","2024-02-18 20:25:17","2024-02-18 20:25:18","2024-02-18 20:25:19","2024-02-18 20:25:21","2024-02-18 20:25:22","2024-02-18 20:25:23","2024-02-18 20:25:24","2024-02-18 20:25:25","2024-02-18 20:25:26","2024-02-18 20:25:28","2024-02-18 20:25:29","2024-02-18 20:25:30","2024-02-18 20:25:31","2024-02-18 20:25:32","2024-02-18 20:25:33","2024-02-18 20:25:35","2024-02-18 20:25:36","2024-02-18 20:25:37","2024-02-18 20:25:38","2024-02-18 20:25:39","2024-02-18 20:25:40","2024-02-18 20:25:42","2024-02-18 20:25:43","2024-02-18 20:25:44","2024-02-18 20:25:45","2024-02-18 20:25:46","2024-02-18 20:25:47","2024-02-18 20:25:48","2024-02-18 20:25:50","2024-02-18 20:25:51","2024-02-18 20:25:52","2024-02-18 20:25:53","2024-02-18 20:25:54","2024-02-18 20:25:55","2024-02-18 20:25:57","2024-02-18 20:25:58","2024-02-18 20:25:59","2024-02-18 20:26:00","2024-02-18 20:26:01","2024-02-18 20:26:02","2024-02-18 20:26:04","2024-02-18 20:26:05","2024-02-18 20:26:06","2024-02-18 20:26:07","2024-02-18 20:26:08","2024-02-18 20:26:09","2024-02-18 20:26:11","2024-02-18 20:26:12","2024-02-18 20:26:13","2024-02-18 20:26:14","2024-02-18 20:26:15","2024-02-18 20:26:16","2024-02-18 20:26:18","2024-02-18 20:26:22","2024-02-18 20:26:23","2024-02-18 20:26:24","2024-02-18 20:26:26","2024-02-18 20:26:27","2024-02-18 20:26:28","2024-02-18 20:26:29","2024-02-18 20:26:30","2024-02-18 20:26:32","2024-02-18 20:26:33","2024-02-18 20:26:34","2024-02-18 20:26:36","2024-02-18 20:26:37","2024-02-18 20:26:38","2024-02-18 20:26:39","2024-02-18 20:26:40","2024-02-18 20:26:41","2024-02-18 20:26:42","2024-02-18 20:26:44","2024-02-18 20:26:45","2024-02-18 20:26:46","2024-02-18 20:26:47","2024-02-18 20:26:48","2024-02-18 20:26:50","2024-02-18 20:26:51","2024-02-18 20:26:52","2024-02-18 20:26:53","2024-02-18 20:26:54","2024-02-18 20:26:55","2024-02-18 20:26:56","2024-02-18 20:26:58","2024-02-18 20:26:59","2024-02-18 20:27:00","2024-02-18 20:27:01","2024-02-18 20:27:02","2024-02-18 20:27:03","2024-02-18 20:27:05","2024-02-18 20:27:06","2024-02-18 20:27:07","2024-02-18 20:27:08","2024-02-18 20:27:10","2024-02-18 20:27:11","2024-02-18 20:27:12","2024-02-18 20:27:13","2024-02-18 20:27:14","2024-02-18 20:27:16","2024-02-18 20:27:17","2024-02-18 20:27:18","2024-02-18 20:27:19","2024-02-18 20:27:20","2024-02-18 20:27:21","2024-02-18 20:27:23","2024-02-18 20:27:24","2024-02-18 20:27:25","2024-02-18 20:27:26","2024-02-18 20:27:27","2024-02-18 20:27:28","2024-02-18 20:27:29","2024-02-18 20:27:31","2024-02-18 20:27:32","2024-02-18 20:27:33","2024-02-18 20:27:34","2024-02-18 20:27:35","2024-02-18 20:27:36","2024-02-18 20:27:38","2024-02-18 20:27:39","2024-02-18 20:27:40","2024-02-18 20:27:41","2024-02-18 20:27:42","2024-02-18 20:27:43","2024-02-18 20:27:45","2024-02-18 20:27:46","2024-02-18 20:27:47","2024-02-18 20:27:48","2024-02-18 20:27:49","2024-02-18 20:27:50","2024-02-18 20:27:52","2024-02-18 20:27:53","2024-02-18 20:27:54","2024-02-18 20:27:55","2024-02-18 20:27:56","2024-02-18 20:27:57","2024-02-18 20:27:59","2024-02-18 20:28:00","2024-02-18 20:28:01","2024-02-18 20:28:02","2024-02-18 20:28:03","2024-02-18 20:28:04","2024-02-18 20:28:06","2024-02-18 20:28:07","2024-02-18 20:28:08","2024-02-18 20:28:09","2024-02-18 20:28:10","2024-02-18 20:28:11","2024-02-18 20:28:13","2024-02-18 20:28:14","2024-02-18 20:28:15","2024-02-18 20:28:16","2024-02-18 20:28:17","2024-02-18 20:28:18","2024-02-18 20:28:20","2024-02-18 20:28:21","2024-02-18 20:28:22","2024-02-18 20:28:23","2024-02-18 20:28:24","2024-02-18 20:28:25","2024-02-18 20:28:27","2024-02-18 20:28:28","2024-02-18 20:28:29","2024-02-18 20:28:30","2024-02-18 20:28:31","2024-02-18 20:28:32","2024-02-18 20:28:34","2024-02-18 20:28:35","2024-02-18 20:28:36","2024-02-18 20:28:37","2024-02-18 20:28:38","2024-02-18 20:28:39","2024-02-18 20:28:40","2024-02-18 20:28:42","2024-02-18 20:28:44","2024-02-18 20:28:45","2024-02-18 20:28:46","2024-02-18 20:28:47","2024-02-18 20:28:48","2024-02-18 20:28:49","2024-02-18 20:28:50","2024-02-18 20:28:52","2024-02-18 20:28:53","2024-02-18 20:28:54","2024-02-18 20:28:55","2024-02-18 20:28:56","2024-02-18 20:28:57","2024-02-18 20:28:59","2024-02-18 20:29:00","2024-02-18 20:29:01","2024-02-18 20:29:02","2024-02-18 20:29:03","2024-02-18 20:29:04","2024-02-18 20:29:06","2024-02-18 20:29:07","2024-02-18 20:29:08","2024-02-18 20:29:09","2024-02-18 20:29:10","2024-02-18 20:29:12","2024-02-18 20:29:13","2024-02-18 20:29:14","2024-02-18 20:29:15","2024-02-18 20:29:16","2024-02-18 20:29:17","2024-02-18 20:29:19","2024-02-18 20:29:20","2024-02-18 20:29:21","2024-02-18 20:29:22","2024-02-18 20:29:23","2024-02-18 20:29:24","2024-02-18 20:29:26","2024-02-18 20:29:27","2024-02-18 20:29:28","2024-02-18 20:29:29","2024-02-18 20:29:30","2024-02-18 20:29:31","2024-02-18 20:29:33","2024-02-18 20:29:34","2024-02-18 20:29:35","2024-02-18 20:29:36","2024-02-18 20:29:37","2024-02-18 20:29:38","2024-02-18 20:29:40","2024-02-18 20:29:41","2024-02-18 20:29:42","2024-02-18 20:29:43","2024-02-18 20:29:44","2024-02-18 20:29:45","2024-02-18 20:29:47","2024-02-18 20:29:48","2024-02-18 20:29:49","2024-02-18 20:29:50","2024-02-18 20:29:51","2024-02-18 20:29:52","2024-02-18 20:29:54","2024-02-18 20:29:55","2024-02-18 20:29:56","2024-02-18 20:29:57","2024-02-18 20:29:58","2024-02-18 20:29:59","2024-02-18 20:30:00","2024-02-18 20:30:02","2024-02-18 20:30:03","2024-02-18 20:30:04","2024-02-18 20:30:05","2024-02-18 20:30:06","2024-02-18 20:30:07","2024-02-18 20:30:09","2024-02-18 20:30:10","2024-02-18 20:30:11","2024-02-18 20:30:12","2024-02-18 20:30:13","2024-02-18 20:30:14","2024-02-18 20:30:16","2024-02-18 20:30:17","2024-02-18 20:30:18","2024-02-18 20:30:19","2024-02-18 20:30:20","2024-02-18 20:30:21","2024-02-18 20:30:23","2024-02-18 20:30:24","2024-02-18 20:30:25","2024-02-18 20:30:26","2024-02-18 20:30:27","2024-02-18 20:30:28","2024-02-18 20:30:30","2024-02-18 20:30:31","2024-02-18 20:30:32","2024-02-18 20:30:33","2024-02-18 20:30:34","2024-02-18 20:30:35","2024-02-18 20:30:37","2024-02-18 20:30:38","2024-02-18 20:30:39","2024-02-18 20:30:40","2024-02-18 20:30:41","2024-02-18 20:30:42","2024-02-18 20:30:44","2024-02-18 20:30:45","2024-02-18 20:30:46","2024-02-18 20:30:47","2024-02-18 20:30:48","2024-02-18 20:30:49","2024-02-18 20:30:51","2024-02-18 20:30:52","2024-02-18 20:30:53","2024-02-18 20:30:54","2024-02-18 20:30:55","2024-02-18 20:30:56","2024-02-18 20:30:58","2024-02-18 20:30:59","2024-02-18 20:31:00","2024-02-18 20:31:02","2024-02-18 20:31:03","2024-02-18 20:31:04","2024-02-18 20:31:05","2024-02-18 20:31:06","2024-02-18 20:31:08","2024-02-18 20:31:09","2024-02-18 20:31:10","2024-02-18 20:31:11","2024-02-18 20:31:12","2024-02-18 20:31:13","2024-02-18 20:31:15","2024-02-18 20:31:16","2024-02-18 20:31:17","2024-02-18 20:31:18","2024-02-18 20:31:19","2024-02-18 20:31:20","2024-02-18 20:31:21","2024-02-18 20:31:23","2024-02-18 20:31:24","2024-02-18 20:31:25","2024-02-18 20:31:26","2024-02-18 20:31:27","2024-02-18 20:31:28","2024-02-18 20:31:30","2024-02-18 20:31:31","2024-02-18 20:31:32","2024-02-18 20:31:33","2024-02-18 20:31:34","2024-02-18 20:31:35","2024-02-18 20:31:37","2024-02-18 20:31:38","2024-02-18 20:31:39","2024-02-18 20:31:40","2024-02-18 20:31:41","2024-02-18 20:31:42","2024-02-18 20:31:44","2024-02-18 20:31:45","2024-02-18 20:31:46","2024-02-18 20:31:47","2024-02-18 20:31:48","2024-02-18 20:31:49","2024-02-18 20:31:50","2024-02-18 20:31:52","2024-02-18 20:31:53","2024-02-18 20:31:54","2024-02-18 20:31:55","2024-02-18 20:31:56","2024-02-18 20:31:57","2024-02-18 20:31:59","2024-02-18 20:32:00","2024-02-18 20:32:01","2024-02-18 20:32:02","2024-02-18 20:32:03","2024-02-18 20:32:04","2024-02-18 20:32:06","2024-02-18 20:32:07","2024-02-18 20:32:08","2024-02-18 20:32:09","2024-02-18 20:32:10","2024-02-18 20:32:11","2024-02-18 20:32:13","2024-02-18 20:32:14","2024-02-18 20:32:15","2024-02-18 20:32:16","2024-02-18 20:32:17","2024-02-18 20:32:18","2024-02-18 20:32:20","2024-02-18 20:32:21","2024-02-18 20:32:22","2024-02-18 20:32:23","2024-02-18 20:32:24","2024-02-18 20:32:26","2024-02-18 20:32:27","2024-02-18 20:32:28","2024-02-18 20:32:29","2024-02-18 20:32:30","2024-02-18 20:32:31","2024-02-18 20:32:33","2024-02-18 20:32:34","2024-02-18 20:32:35","2024-02-18 20:32:36","2024-02-18 20:32:37","2024-02-18 20:32:38","2024-02-18 20:32:40","2024-02-18 20:32:41","2024-02-18 20:32:42","2024-02-18 20:32:43","2024-02-18 20:32:44","2024-02-18 20:32:45","2024-02-18 20:32:46","2024-02-18 20:32:48","2024-02-18 20:32:49","2024-02-18 20:32:50","2024-02-18 20:32:51","2024-02-18 20:32:52","2024-02-18 20:32:53","2024-02-18 20:32:55","2024-02-18 20:32:56","2024-02-18 20:32:57","2024-02-18 20:32:58","2024-02-18 20:33:00","2024-02-18 20:33:01","2024-02-18 20:33:02","2024-02-18 20:33:03","2024-02-18 20:33:04","2024-02-18 20:33:05","2024-02-18 20:33:06","2024-02-18 20:33:08","2024-02-18 20:33:09","2024-02-18 20:33:10","2024-02-18 20:33:11","2024-02-18 20:33:12","2024-02-18 20:33:14","2024-02-18 20:33:15","2024-02-18 20:33:16","2024-02-18 20:33:17","2024-02-18 20:33:18","2024-02-18 20:33:19","2024-02-18 20:33:21","2024-02-18 20:33:22","2024-02-18 20:33:23","2024-02-18 20:33:24","2024-02-18 20:33:25","2024-02-18 20:33:26","2024-02-18 20:33:28","2024-02-18 20:33:29","2024-02-18 20:33:30","2024-02-18 20:33:31","2024-02-18 20:33:32","2024-02-18 20:33:33","2024-02-18 20:33:34","2024-02-18 20:33:36","2024-02-18 20:33:37","2024-02-18 20:33:38","2024-02-18 20:33:39","2024-02-18 20:33:40","2024-02-18 20:33:41","2024-02-18 20:33:43","2024-02-18 20:33:44","2024-02-18 20:33:45","2024-02-18 20:33:46","2024-02-18 20:33:47","2024-02-18 20:33:48","2024-02-18 20:33:50","2024-02-18 20:33:51","2024-02-18 20:33:52","2024-02-18 20:33:53","2024-02-18 20:33:54","2024-02-18 20:33:55","2024-02-18 20:33:57","2024-02-18 20:33:58","2024-02-18 20:33:59","2024-02-18 20:34:00","2024-02-18 20:34:01","2024-02-18 20:34:02","2024-02-18 20:34:04","2024-02-18 20:34:05","2024-02-18 20:34:06","2024-02-18 20:34:07","2024-02-18 20:34:08","2024-02-18 20:34:09","2024-02-18 20:34:11","2024-02-18 20:34:12","2024-02-18 20:34:13","2024-02-18 20:34:14","2024-02-18 20:34:15","2024-02-18 20:34:16","2024-02-18 20:34:17","2024-02-18 20:34:19","2024-02-18 20:34:20","2024-02-18 20:34:21","2024-02-18 20:34:22","2024-02-18 20:34:23","2024-02-18 20:34:24","2024-02-18 20:34:26","2024-02-18 20:34:27","2024-02-18 20:34:28","2024-02-18 20:34:29","2024-02-18 20:34:30","2024-02-18 20:34:31","2024-02-18 20:34:33","2024-02-18 20:34:34","2024-02-18 20:34:35","2024-02-18 20:34:36","2024-02-18 20:34:38","2024-02-18 20:34:39","2024-02-18 20:34:40","2024-02-18 20:34:41","2024-02-18 20:34:42","2024-02-18 20:34:43","2024-02-18 20:34:45","2024-02-18 20:34:46","2024-02-18 20:34:47","2024-02-18 20:34:48","2024-02-18 20:34:49","2024-02-18 20:34:50","2024-02-18 20:34:52","2024-02-18 20:34:53","2024-02-18 20:34:54","2024-02-18 20:34:55"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-39.3205,11.1795],"lng":[-94.84480000000001,-49.8681]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</center>
</section></section>
<section>
<section id="section" class="title-slide slide level1 smaller center">
<h1></h1>

</section>
<h3 id="questions-short-break">Questions? / Short break</h3>
<div class="qr-image-div">
<p><img data-src="images/conference_question.png" data-fig-align="center" height="570"> <br><br> <span class="img-caption-medium"> <strong>Comic source:</strong> <a href="https://xkcd.com/2191">https://xkcd.com/2191</a> </span></p>
</div></section>
<section>
<section id="introduction-to-plumber" class="title-slide slide level1 center">
<h1>Introduction to <a href="https://www.rplumber.io"><code>{plumber}</code></a></h1>
<p><img data-src="images/plumber.png" class="absolute" style="bottom: 0px; right: 0px; "></p>
<p><br> <br></p>

<aside><div>
<p><strong>Plumber’s website:</strong> <a href="https://www.rplumber.io">https://www.rplumber.io</a></p>
</div></aside></section>
<section id="whats-plumber" class="slide level2 smaller">
<h2>What’s <code>{plumber}</code>?</h2>
<blockquote>
<p>Plumber allows you to create a web API by merely <em>decorating</em> your existing R source code with roxygen2-like comments. <span class="citation" data-cites="Barret2022">(<a href="#/references" role="doc-biblioref" onclick="">Schloerke and Allen, 2022</a>)</span></p>
</blockquote>
<div class="fragment fade-in">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>R comments &amp; decorators</strong></p>
</div>
<div class="callout-content">
<ul>
<li>Regular R comments are included with the <code>#</code>.</li>
<li>Roxygen2 comments allow the user to document their functions with the notation <code>#'</code> which is translated into R documentation.</li>
<li><code>{plumber}</code> uses the notation <code>#*</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="plumber-ising-a-function-notation" class="slide level2 smaller">
<h2><code>{plumber}</code>-ising a function / notation</h2>
<p>Given a simple <em>hello world</em> function</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co"># This function returns a message</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>hello_world <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb27-3"><a href="#cb27-3"></a>  <span class="fu">return</span>(<span class="st">"Hello XXIV SIMMAC!"</span>)</span>
<span id="cb27-4"><a href="#cb27-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="plumber-ising-a-function-notation-1" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"><code>{plumber}</code>-ising a function / notation</h2>
<p>Given a simple <em>hello world</em> function:</p>
<div class="sourceCode" id="cb28" data-code-line-numbers="|1-2|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb28-1" class="hljs-ln-code"><a href="#cb28-1"></a><span class="co">#* This function returns a message</span></span>
<span id="cb28-2" class="hljs-ln-code"><a href="#cb28-2"></a><span class="co">#* @get /hello_world</span></span>
<span id="cb28-3" class="hljs-ln-code"><a href="#cb28-3"></a><span class="cf">function</span>() {</span>
<span id="cb28-4" class="hljs-ln-code"><a href="#cb28-4"></a>  <span class="fu">return</span>(<span class="st">"Hello XXIV SIMMAC!"</span>)</span>
<span id="cb28-5" class="hljs-ln-code"><a href="#cb28-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>{plumber}</code>-ised function!</p>
<div class="fragment fade-in">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<ul>
<li>The change from <code>#</code> to <code>#*</code> for the comments.</li>
<li>The addition of <code>@get /&lt;function_name&gt;</code>.</li>
<li>The function name was relocated.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="plumber-ising-a-function-notation-with-params" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"><code>{plumber}</code>-ising a function / notation: with params</h2>
<p>Given a function to calculate the square of a number, <code>a</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb29-1" class="hljs-ln-code"><a href="#cb29-1"></a><span class="co"># This function calculates the square of `a`</span></span>
<span id="cb29-2" class="hljs-ln-code"><a href="#cb29-2"></a>square <span class="ot">&lt;-</span> <span class="cf">function</span>(a) {</span>
<span id="cb29-3" class="hljs-ln-code"><a href="#cb29-3"></a>  <span class="fu">return</span>(<span class="fu">as.numeric</span>(a) <span class="sc">^</span> <span class="dv">2</span>)</span>
<span id="cb29-4" class="hljs-ln-code"><a href="#cb29-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="plumber-ising-a-function-notation-with-params-1" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"><code>{plumber}</code>-ising a function / notation: with params</h2>
<p>Given a function to calculate the square of a number, <code>a</code>:</p>
<div class="sourceCode" id="cb30" data-code-line-numbers="|1,3|2|1-3|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb30-1" class="hljs-ln-code"><a href="#cb30-1"></a><span class="co">#* This function calculates the square of `a`</span></span>
<span id="cb30-2" class="hljs-ln-code"><a href="#cb30-2"></a><span class="co">#* @param a Numeric value.</span></span>
<span id="cb30-3" class="hljs-ln-code"><a href="#cb30-3"></a><span class="co">#* @get /square </span></span>
<span id="cb30-4" class="hljs-ln-code"><a href="#cb30-4"></a><span class="cf">function</span>(a) {</span>
<span id="cb30-5" class="hljs-ln-code"><a href="#cb30-5"></a>  <span class="fu">return</span>(<span class="fu">as.numeric</span>(a) <span class="sc">^</span> <span class="dv">2</span>)</span>
<span id="cb30-6" class="hljs-ln-code"><a href="#cb30-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>{plumber}</code>-ised function!</p>
<div class="fragment fade-in">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<ul>
<li>The change from <code>#</code> to <code>#*</code> for the comments.</li>
<li>The addition of <code>@param &lt;param_name&gt; &lt;description</code>. If the function had multiple params, the each of them will have to be documented using this format.</li>
<li>The addition of <code>@get /&lt;function_name&gt;</code>.</li>
<li>The function name was relocated.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="routing-input" class="slide level2 smaller">
<h2>Routing &amp; Input</h2>
<blockquote>
<p>An incoming HTTP request must be “routed” to one or more R functions. Plumber has two distinct families of functions that it handles: <em>endpoints</em> and <em>filters</em>. <span class="citation" data-cites="Barret2022">(<a href="#/references" role="doc-biblioref" onclick="">Schloerke and Allen, 2022</a>)</span></p>
</blockquote>
<div class="qr-image-div">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/plumber-flow.png" height="350"></p>
</figure>
</div>
</div>
</section>
<section id="routing-input-endpoints" class="slide level2 smaller">
<h2>Routing &amp; Input: endpoints</h2>
<p>An endpoint is an annotated function, like those we already saw:</p>
<div class="sourceCode" id="cb31" data-code-line-numbers="|1-2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="co">#* This function returns a message</span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="co">#* @get /hello_world</span></span>
<span id="cb31-3"><a href="#cb31-3"></a><span class="cf">function</span>() {</span>
<span id="cb31-4"><a href="#cb31-4"></a>  <span class="fu">return</span>(<span class="st">"Hello XXIV SIMMAC!"</span>)</span>
<span id="cb31-5"><a href="#cb31-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>This annotation specifies that this function is responsible for generating the response to any <code>GET</code> request to <code>/hello_world</code>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="routing-input-endpoints-1" class="slide level2 smaller" data-auto-animate="false">
<h2 data-id="quarto-animate-title">Routing &amp; Input: endpoints</h2>
<p>The annotations that generate an endpoint include:</p>
<ul>
<li><code>@get</code>: Read</li>
<li><code>@post</code>: Read / write</li>
<li><code>@put</code>: Update / replace</li>
<li><code>@delete</code>: Delete</li>
</ul>

<div class="fragment fade-in">
<p>An endpoint can support multiple methods:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb32-1" class="hljs-ln-code"><a href="#cb32-1"></a><span class="co">#* @get /cars</span></span>
<span id="cb32-2" class="hljs-ln-code"><a href="#cb32-2"></a><span class="co">#* @post /cars</span></span>
<span id="cb32-3" class="hljs-ln-code"><a href="#cb32-3"></a><span class="co">#* @put /cars</span></span>
<span id="cb32-4" class="hljs-ln-code"><a href="#cb32-4"></a><span class="cf">function</span>(){</span>
<span id="cb32-5" class="hljs-ln-code"><a href="#cb32-5"></a>  ...</span>
<span id="cb32-6" class="hljs-ln-code"><a href="#cb32-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside><div>
<p>More details can be found here: <a href="https://www.restapitutorial.com/lessons/httpmethods.html">https://www.restapitutorial.com/lessons/httpmethods.html</a></p>
</div></aside></section>
<section id="routing-input-filters" class="slide level2 smaller" data-auto-animate="false">
<h2 data-id="quarto-animate-title">Routing &amp; Input: filters</h2>
<blockquote>
<p>allow to break down complex logic into a sequence of independent, understandable steps. <span class="citation" data-cites="Barret2022">(<a href="#/references" role="doc-biblioref" onclick="">Schloerke and Allen, 2022</a>)</span></p>
</blockquote>
<div class="fragment fade-in">
<p>Filters can do one of three things in handling a request:</p>
<ul>
<li><em>Forward</em> control onto the next handler, potentially after mutating the request.</li>
<li><em>Return</em> a response itself and not forward to subsequent handlers</li>
<li><em>Throw</em> an error</li>
</ul>
</div>

<aside><div>
<p>More details about endpoints and filters: <a href="https://www.rplumber.io/articles/routing-and-input.html">https://www.rplumber.io/articles/routing-and-input.html</a></p>
</div></aside></section>
<section id="routing-input-filters-1" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Routing &amp; Input: filters</h2>
<blockquote>
<p>allow to break down complex logic into a sequence of independent, understandable steps. <span class="citation" data-cites="Barret2022">(<a href="#/references" role="doc-biblioref" onclick="">Schloerke and Allen, 2022</a>)</span></p>
</blockquote>
<div class="sourceCode" id="cb33" data-code-line-numbers="|1|2|3|5|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb33-1" class="hljs-ln-code"><a href="#cb33-1"></a><span class="co">#* @filter removeSemicolon</span></span>
<span id="cb33-2" class="hljs-ln-code"><a href="#cb33-2"></a><span class="cf">function</span>(req, res) {</span>
<span id="cb33-3" class="hljs-ln-code"><a href="#cb33-3"></a>  req<span class="sc">$</span>args <span class="ot">&lt;-</span> req<span class="sc">$</span>args <span class="sc">|&gt;</span></span>
<span id="cb33-4" class="hljs-ln-code"><a href="#cb33-4"></a>    purrr<span class="sc">::</span><span class="fu">map</span>(stringr<span class="sc">::</span>str_remove_all, <span class="at">pattern =</span> <span class="st">";"</span>)</span>
<span id="cb33-5" class="hljs-ln-code"><a href="#cb33-5"></a>  plumber<span class="sc">::</span><span class="fu">forward</span>()</span>
<span id="cb33-6" class="hljs-ln-code"><a href="#cb33-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment fade-in">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<ul>
<li><p>Note the inclusion of the <code>@filter</code> <em>decorator</em>.</p></li>
<li><p>A <em>filter</em> has two parameters, <code>req</code> (request) and <code>res</code> (result).</p>
<ul>
<li>Both <code>req</code> and <code>res</code> are R environments, which means that changes done by a filter, will be <em>visible</em> to subsequent filters/endpoints.</li>
</ul></li>
<li><p>The <code>plumber::forward()</code> call, passes control to the next handler in the pipeline (another filter or an endpoint. <span class="citation" data-cites="Barret2022">(<a href="#/references" role="doc-biblioref" onclick="">Schloerke and Allen, 2022</a>)</span></p></li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="rendering-output" class="slide level2 smaller" data-auto-animate="false">
<h2 data-id="quarto-animate-title">Rendering Output</h2>
<p>A response object (an environment) contains the following elements:</p>
<!-- ::: {.incremental} -->
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Example</th>
<th style="text-align: right;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>headers</td>
<td><code>list(header = "abc")</code></td>
<td style="text-align: right;">A list of HTTP headers to include in the response</td>
</tr>
<tr class="even">
<td>body</td>
<td><code>NULL</code></td>
<td style="text-align: right;">This is set to the serialized output of the handler</td>
</tr>
<tr class="odd">
<td>status</td>
<td><code>200</code></td>
<td style="text-align: right;">The <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">HTTP status code</a> included in the response</td>
</tr>
</tbody>
</table>
<!-- ::: -->
</section>
<section id="rendering-output-serializers" class="slide level2 smaller" data-auto-animate="false">
<h2 data-id="quarto-animate-title">Rendering Output: serializers</h2>
<blockquote>
<p>In order to send a response from R to an API client, the object must be “serialized” into some format that the client can understand. <span class="citation" data-cites="Barret2022">(<a href="#/references" role="doc-biblioref" onclick="">Schloerke and Allen, 2022</a>)</span></p>
</blockquote>
<!-- :::: {.columns} -->
<!-- ::: {.column width="45%"} -->
<div class="fragment fade-in">
<p>Some examples:</p>
<ul>
<li>CSV: <code>@serializer csv</code></li>
<li>JPEG: <code>@serializer jpeg</code></li>
<li>JSON: <code>@serializer json</code></li>
<li>PDF: <code>@serializer pdf</code></li>
<li>PNG: <code>@serializer png</code></li>
<li>Text: <code>@serializer text</code></li>
</ul>
</div>
<!-- ::: -->
<!-- ::: {.column width="10%"} -->
<!-- ::: -->
<!-- ::: {.column width="45%"} -->
<!-- ::: {.fragment .fade-in} -->
<!-- ::: -->
<!-- ::: -->
<!-- :::: -->

<aside><div>
<p>More details: <a href="https://www.rplumber.io/articles/rendering-output.html">https://www.rplumber.io/articles/rendering-output.html</a></p>
</div></aside></section>
<section id="rendering-output-serializers-1" class="slide level2 smaller" data-auto-animate="false">
<h2 data-id="quarto-animate-title">Rendering Output: serializers</h2>
<p>Serializers can also be customised:</p>
<div class="sourceCode" id="cb34" data-code-line-numbers="|2|"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="co">#* Example of custom graphical output</span></span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="co">#* @serializer png list(width = 400, height = 500)</span></span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="co">#* @get /</span></span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="cf">function</span>(){</span>
<span id="cb34-5"><a href="#cb34-5"></a>  <span class="fu">plot</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb34-6"><a href="#cb34-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment fade-in">
<p>Error handling:</p>
<div class="sourceCode" id="cb35" data-code-line-numbers="|4|10-12|"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="co">#* Example of throwing an error</span></span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="co">#* @get /simple</span></span>
<span id="cb35-3"><a href="#cb35-3"></a><span class="cf">function</span>() {</span>
<span id="cb35-4"><a href="#cb35-4"></a>  <span class="fu">stop</span>(<span class="st">"I'm an error!"</span>)</span>
<span id="cb35-5"><a href="#cb35-5"></a>}</span>
<span id="cb35-6"><a href="#cb35-6"></a></span>
<span id="cb35-7"><a href="#cb35-7"></a><span class="co">#* Generate a friendly error</span></span>
<span id="cb35-8"><a href="#cb35-8"></a><span class="co">#* @get /friendly</span></span>
<span id="cb35-9"><a href="#cb35-9"></a><span class="cf">function</span>(res) {</span>
<span id="cb35-10"><a href="#cb35-10"></a>  msg <span class="ot">&lt;-</span> <span class="st">"Your request did not include a required parameter."</span></span>
<span id="cb35-11"><a href="#cb35-11"></a>  res<span class="sc">$</span>status <span class="ot">&lt;-</span> <span class="dv">400</span> <span class="co"># Bad request</span></span>
<span id="cb35-12"><a href="#cb35-12"></a>  <span class="fu">list</span>(<span class="at">error =</span> jsonlite<span class="sc">::</span><span class="fu">unbox</span>(msg))</span>
<span id="cb35-13"><a href="#cb35-13"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="building-your-own-api" class="title-slide slide level1 center" data-auto-animate="false">
<h1 data-id="quarto-animate-title">Building your own API</h1>

</section>
<section id="section-1" class="slide level2 smaller">
<h2></h2>
<h3 id="building-your-own-api-1">Building your own API</h3>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>Before you attempt the following steps, you must execute the following command:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="fu">install.packages</span>(<span class="st">"plumber"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ol type="1">
<li>Inside RStudio, click on <code>File</code> &gt; <code>New File</code> &gt; <code>Plumber API...</code>:</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/rstudio_new_plumber_api.png" height="350"></p>
</figure>
</div>
</section>
<section id="building-your-own-api-2" class="slide level2 smaller">
<h2>Building your own API</h2>
<ol start="2" type="1">
<li>Next, choose a name for your API (e.g., <code>XXIV_SIMMAC</code>) and click on <em>Create</em>:</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/rstudio_new_plumber_api_2.png" height="300"></p>
</figure>
</div>
</section>
<section id="section-2" class="slide level2 smaller">
<h2></h2>
<h3 id="building-your-own-api-3">Building your own API</h3>
<ol start="3" type="1">
<li>A new R script (called <code>plumber.R</code>) should be displayed in your RStudio session.</li>
</ol>
<div class="sourceCode" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># This is a Plumber API. You can run the API by clicking</span></span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="co"># the 'Run API' button above.</span></span>
<span id="cb37-3"><a href="#cb37-3"></a><span class="co">#</span></span>
<span id="cb37-4"><a href="#cb37-4"></a><span class="co"># Find out more about building APIs with Plumber here:</span></span>
<span id="cb37-5"><a href="#cb37-5"></a><span class="co">#</span></span>
<span id="cb37-6"><a href="#cb37-6"></a><span class="co">#    https://www.rplumber.io/</span></span>
<span id="cb37-7"><a href="#cb37-7"></a><span class="co">#</span></span>
<span id="cb37-8"><a href="#cb37-8"></a><span class="fu">library</span>(plumber)</span>
<span id="cb37-9"><a href="#cb37-9"></a></span>
<span id="cb37-10"><a href="#cb37-10"></a><span class="co">#* @apiTitle Plumber Example API</span></span>
<span id="cb37-11"><a href="#cb37-11"></a><span class="co">#* @apiDescription Plumber example description.</span></span>
<span id="cb37-12"><a href="#cb37-12"></a></span>
<span id="cb37-13"><a href="#cb37-13"></a><span class="co">#* Echo back the input</span></span>
<span id="cb37-14"><a href="#cb37-14"></a><span class="co">#* @param msg The message to echo</span></span>
<span id="cb37-15"><a href="#cb37-15"></a><span class="co">#* @get /echo</span></span>
<span id="cb37-16"><a href="#cb37-16"></a><span class="cf">function</span>(<span class="at">msg =</span> <span class="st">""</span>) {</span>
<span id="cb37-17"><a href="#cb37-17"></a>    <span class="fu">list</span>(<span class="at">msg =</span> <span class="fu">paste0</span>(<span class="st">"The message is: '"</span>, msg, <span class="st">"'"</span>))</span>
<span id="cb37-18"><a href="#cb37-18"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that a new button should have appeared at the top of your script options:</p>
<p><img data-src="images/rstudio_run_api.png" height="40"></p>
<p>Clicking on this button will <em>deploy</em> your API locally.</p>
</section></section>
<section>
<section id="hands-on-session-2" class="title-slide slide level1 smaller center" data-auto-animate="false">
<h1 data-id="quarto-animate-title">Hands on session 2</h1>
<p>I. Write a plumber function to use the Gapminder dataset to find the population of Costa Rica in 1982.</p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Gapminder is a dataset of populations of various countries from 1952 - 2007. We will access it with the <a href="https://cran.r-project.org/package=gapminder"><code>{gapminder}</code></a> package. <span class="citation" data-cites="Bryan2023">(<a href="#/references" role="doc-biblioref" onclick="">Bryan, 2023</a>)</span></p>
</div>
</div>
</div>
<ol start="2" type="I">
<li><p>Write a plumber function to allow a user to find out the population of any country during any year in the Gapminder dataset.</p></li>
<li><p>Write a plumber function to plot the population change of a user defined country.</p></li>
</ol>
</section>
<section id="section-3" class="slide level2 smaller">
<h2></h2>
<h3 id="i.-write-a-plumber-function-to-use-the-gapminder-dataset-to-find-the-population-of-costa-rica-in-1982.">I. Write a plumber function to use the Gapminder dataset to find the population of Costa Rica in 1982.</h3>

<p><strong>Where do we start?</strong></p>
<div>
<ol type="1">
<li class="fragment">We can start by creating a “simple” R function that gets the data we want!</li>
</ol>
<div class="fragment fade-in">
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="co"># This function returns the population of Costa Rica in 1982</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>pop_cr_1982 <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb38-3"><a href="#cb38-3"></a>  pop_tbl <span class="ot">&lt;-</span> gapminder<span class="sc">::</span>gapminder <span class="sc">|&gt;</span></span>
<span id="cb38-4"><a href="#cb38-4"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Costa Rica"</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-5"><a href="#cb38-5"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">1982</span>)</span>
<span id="cb38-6"><a href="#cb38-6"></a>  <span class="fu">return</span>(pop_tbl<span class="sc">$</span>pop)</span>
<span id="cb38-7"><a href="#cb38-7"></a>}</span>
<span id="cb38-8"><a href="#cb38-8"></a></span>
<span id="cb38-9"><a href="#cb38-9"></a><span class="co"># call our function</span></span>
<span id="cb38-10"><a href="#cb38-10"></a><span class="fu">pop_cr_1982</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2424367</code></pre>
</div>
</div>
</div>
</div>
<aside><div>
<p><strong>Reference R Scripts:</strong> <code>4_pop_costa_rica_1982-client.R</code> and <code>4_pop_costa_rica_1982-client.R</code></p>
</div></aside></section>
<section id="section-4" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="i.-write-a-plumber-function-to-use-the-gapminder-dataset-to-find-the-population-of-costa-rica-in-1982.-1">I. Write a plumber function to use the Gapminder dataset to find the population of Costa Rica in 1982.</h3>
<ol start="2" type="1">
<li>Next, we can add the “<code>{plumber}</code> decorators” to transform this function.</li>
</ol>
<div class="fragment fade-in">
<div class="sourceCode" id="cb40" data-code-line-numbers="|1-2|3|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb40-1" class="hljs-ln-code"><a href="#cb40-1"></a><span class="co">#* This function returns the population of Costa Rica in 1982</span></span>
<span id="cb40-2" class="hljs-ln-code"><a href="#cb40-2"></a><span class="co">#* @get /pop_cr_1982 </span></span>
<span id="cb40-3" class="hljs-ln-code"><a href="#cb40-3"></a><span class="cf">function</span>() {</span>
<span id="cb40-4" class="hljs-ln-code"><a href="#cb40-4"></a>  pop_tbl <span class="ot">&lt;-</span> gapminder<span class="sc">::</span>gapminder <span class="sc">|&gt;</span></span>
<span id="cb40-5" class="hljs-ln-code"><a href="#cb40-5"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Costa Rica"</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-6" class="hljs-ln-code"><a href="#cb40-6"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">1982</span>)</span>
<span id="cb40-7" class="hljs-ln-code"><a href="#cb40-7"></a>  <span class="fu">return</span>(pop_tbl<span class="sc">$</span>pop)</span>
<span id="cb40-8" class="hljs-ln-code"><a href="#cb40-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-5" class="slide level2 smaller">
<h2></h2>
<h3 id="i.-write-a-plumber-function-to-use-the-gapminder-dataset-to-find-the-population-of-costa-rica-in-1982.-2">I. Write a plumber function to use the Gapminder dataset to find the population of Costa Rica in 1982.</h3>
<ol start="3" type="1">
<li>After deploying the API, you can test it as you already learnt:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>response <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="st">"http://127.0.0.1:1234/pop_cr_1982"</span>)</span>
<span id="cb41-2"><a href="#cb41-2"></a>response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Response [http://127.0.0.1:1234/pop_cr_1982]
  Date: 2024-02-22 22:15
  Status: 200
  Content-Type: application/json
  Size: 9 B</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="co"># the content is in binary, so convert the response to an R data object</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>content <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(response<span class="sc">$</span>content))</span>
<span id="cb43-3"><a href="#cb43-3"></a>content</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2424367</code></pre>
</div>
</div>
</section>
<section id="section-6" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="ii.-write-a-plumber-function-to-allow-a-user-to-find-out-the-population-of-any-country-during-any-year-in-the-gapminder-dataset.">II. Write a plumber function to allow a user to find out the population of any country during any year in the Gapminder dataset.</h3>
<p><strong>Where do we start?</strong></p>
<div>
<ol type="1">
<li class="fragment">We can start by adapting our previous solution.</li>
</ol>
<div class="fragment fade-in">
<div class="sourceCode" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb45-1" class="hljs-ln-code"><a href="#cb45-1"></a><span class="co">#* This function returns the population of Costa Rica in 1982</span></span>
<span id="cb45-2" class="hljs-ln-code"><a href="#cb45-2"></a><span class="co">#* @get /pop_cr_1982 </span></span>
<span id="cb45-3" class="hljs-ln-code"><a href="#cb45-3"></a><span class="cf">function</span>() {</span>
<span id="cb45-4" class="hljs-ln-code"><a href="#cb45-4"></a>  pop_tbl <span class="ot">&lt;-</span> gapminder<span class="sc">::</span>gapminder <span class="sc">|&gt;</span></span>
<span id="cb45-5" class="hljs-ln-code"><a href="#cb45-5"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Costa Rica"</span>) <span class="sc">|&gt;</span></span>
<span id="cb45-6" class="hljs-ln-code"><a href="#cb45-6"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">1982</span>)</span>
<span id="cb45-7" class="hljs-ln-code"><a href="#cb45-7"></a>  <span class="fu">return</span>(pop_tbl<span class="sc">$</span>pop)</span>
<span id="cb45-8" class="hljs-ln-code"><a href="#cb45-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="section-7" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="ii.-write-a-plumber-function-to-allow-a-user-to-find-out-the-population-of-any-country-during-any-year-in-the-gapminder-dataset.-1">II. Write a plumber function to allow a user to find out the population of any country during any year in the Gapminder dataset.</h3>

<p><strong>Where do we start?</strong></p>
<ol type="1">
<li>We can start by adapting our previous solution.</li>
</ol>
<div class="sourceCode" id="cb46" data-code-line-numbers="|1|2-3|4|7-8|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb46-1" class="hljs-ln-code"><a href="#cb46-1"></a><span class="co">#* This function returns the population for a `country` in a particular `year`</span></span>
<span id="cb46-2" class="hljs-ln-code"><a href="#cb46-2"></a><span class="co">#* @param country String with a country in the Gapminder dataset: https://doi.org/10.7910/DVN/GJQNEQ.</span></span>
<span id="cb46-3" class="hljs-ln-code"><a href="#cb46-3"></a><span class="co">#* @param year A numeric value with a year of data available in Gapminder dataset (1952 - 2007 in steps of 5 years).</span></span>
<span id="cb46-4" class="hljs-ln-code"><a href="#cb46-4"></a><span class="co">#* @get /pop_country</span></span>
<span id="cb46-5" class="hljs-ln-code"><a href="#cb46-5"></a><span class="cf">function</span>(country, year) {</span>
<span id="cb46-6" class="hljs-ln-code"><a href="#cb46-6"></a>  pop_tbl <span class="ot">&lt;-</span> gapminder<span class="sc">::</span>gapminder <span class="sc">|&gt;</span></span>
<span id="cb46-7" class="hljs-ln-code"><a href="#cb46-7"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(country <span class="sc">==</span> <span class="sc">!!</span>country) <span class="sc">|&gt;</span></span>
<span id="cb46-8" class="hljs-ln-code"><a href="#cb46-8"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(year <span class="sc">==</span> <span class="fu">as.numeric</span>(<span class="sc">!!</span>year))</span>
<span id="cb46-9" class="hljs-ln-code"><a href="#cb46-9"></a>  <span class="fu">return</span>(pop_tbl<span class="sc">$</span>pop)</span>
<span id="cb46-10" class="hljs-ln-code"><a href="#cb46-10"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Note the addition of the <em>bang-bang</em> operator, to “unquote” the values received for <code>country</code> and <code>year</code>. <span class="citation" data-cites="wickham2014advanced">(<a href="#/references" role="doc-biblioref" onclick="">Wickham, 2014</a>)</span></p>
</div>
</div>
</div>
<aside><div>
<p><strong>Reference R Scripts:</strong> <code>5_pop_any_country_any_year-client.R</code> and <code>5_pop_any_country_any_year-server.R</code></p>
</div></aside></section>
<section id="section-8" class="slide level2 smaller scrollable">
<h2></h2>
<h3 id="ii.-write-a-plumber-function-to-allow-a-user-to-find-out-the-population-of-any-country-during-any-year-in-the-gapminder-dataset.-2">II. Write a plumber function to allow a user to find out the population of any country during any year in the Gapminder dataset.</h3>
<ol start="2" type="1">
<li>After deploying the API, you can test it as you already learnt:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="co"># encode URL / replace spaces, etc.</span></span>
<span id="cb47-2"><a href="#cb47-2"></a>url <span class="ot">&lt;-</span> <span class="fu">URLencode</span>(<span class="st">"http://127.0.0.1:1234/pop_country?country=United Kingdom&amp;year=1982"</span>)</span>
<span id="cb47-3"><a href="#cb47-3"></a>response <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(url)</span>
<span id="cb47-4"><a href="#cb47-4"></a>response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Response [http://127.0.0.1:1234/pop_country?country=United%20Kingdom&amp;year=1982]
  Date: 2024-02-22 22:15
  Status: 200
  Content-Type: application/json
  Size: 10 B</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="co"># the content is in binary, so convert the response to an R data object</span></span>
<span id="cb49-2"><a href="#cb49-2"></a>content <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(response<span class="sc">$</span>content))</span>
<span id="cb49-3"><a href="#cb49-3"></a>content</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 56339704</code></pre>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Note that this call to the API has an extra line,</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="fu">URLencode</span>(<span class="st">"http://127.0.0.1:1234/pop_country?country=United Kingdom&amp;year=1982"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The function <code>URLencode</code> changes special characters (like spaces) into the appropriate hexadecimal representation.</p>
</div>
</div>
</div>
</section>
<section id="section-9" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="ii.-write-a-plumber-function-to-allow-a-user-to-find-out-the-population-of-any-country-during-any-year-in-the-gapminder-dataset.-3">II. Write a plumber function to allow a user to find out the population of any country during any year in the Gapminder dataset.</h3>
<p>Further improvements, the solution shown before does not handle (in a user friendly) common errors like:</p>
<ul>
<li>entering a country that doesn’t exist in the Gapminder data</li>
<li>choosing a year outside those available</li>
<li>choosing a non-numeric value for the year</li>
<li>and probably others.</li>
</ul>
</section>
<section id="section-10" class="slide level2 smaller scrollable" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="ii.-write-a-plumber-function-to-allow-a-user-to-find-out-the-population-of-any-country-during-any-year-in-the-gapminder-dataset.-4">II. Write a plumber function to allow a user to find out the population of any country during any year in the Gapminder dataset.</h3>
<p><strong>Is there anything we can do to validate these fields?</strong></p>
<div class="fragment">
<p>Yes, of course! We can create a <em>filter</em> or perform these checks within the <em>endpoint</em>.</p>
<div class="sourceCode" id="cb52" data-code-line-numbers="|1-2|5|7-8|10|12-15|16|18-19|24|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb52-1" class="hljs-ln-code"><a href="#cb52-1"></a><span class="co">#* This filter checks for valid countries in the Gapminder dataset</span></span>
<span id="cb52-2" class="hljs-ln-code"><a href="#cb52-2"></a><span class="co">#* @filter validate_year</span></span>
<span id="cb52-3" class="hljs-ln-code"><a href="#cb52-3"></a><span class="cf">function</span>(req, res) {</span>
<span id="cb52-4" class="hljs-ln-code"><a href="#cb52-4"></a>  <span class="co"># check if the calling endpoint has a year parameter</span></span>
<span id="cb52-5" class="hljs-ln-code"><a href="#cb52-5"></a>  <span class="cf">if</span> (<span class="st">"year"</span> <span class="sc">%in%</span> <span class="fu">names</span>(req<span class="sc">$</span>args)) {</span>
<span id="cb52-6" class="hljs-ln-code"><a href="#cb52-6"></a>    <span class="co"># check if the given year is in the Gapminder dataset</span></span>
<span id="cb52-7" class="hljs-ln-code"><a href="#cb52-7"></a>    year <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(req<span class="sc">$</span>args<span class="sc">$</span>year)</span>
<span id="cb52-8" class="hljs-ln-code"><a href="#cb52-8"></a>    gapminder_years <span class="ot">&lt;-</span> <span class="fu">unique</span>(gapminder<span class="sc">::</span>gapminder<span class="sc">$</span>year)</span>
<span id="cb52-9" class="hljs-ln-code"><a href="#cb52-9"></a>    <span class="co"># do check</span></span>
<span id="cb52-10" class="hljs-ln-code"><a href="#cb52-10"></a>    status <span class="ot">&lt;-</span> <span class="fu">any</span>(year <span class="sc">%in%</span> gapminder_years)</span>
<span id="cb52-11" class="hljs-ln-code"><a href="#cb52-11"></a>    <span class="cf">if</span> (<span class="sc">!</span>status) {</span>
<span id="cb52-12" class="hljs-ln-code"><a href="#cb52-12"></a>      msg <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"The given year, "</span>, year, </span>
<span id="cb52-13" class="hljs-ln-code"><a href="#cb52-13"></a>                    <span class="st">", it's not part of the Gapminder dataset. "</span>,</span>
<span id="cb52-14" class="hljs-ln-code"><a href="#cb52-14"></a>                    <span class="st">"Please, try one of the following: "</span>,</span>
<span id="cb52-15" class="hljs-ln-code"><a href="#cb52-15"></a>                    <span class="fu">paste0</span>(gapminder_years, <span class="at">collapse =</span> <span class="st">", "</span>)) </span>
<span id="cb52-16" class="hljs-ln-code"><a href="#cb52-16"></a>      res<span class="sc">$</span>status <span class="ot">&lt;-</span> <span class="dv">400</span> <span class="co"># Bad request</span></span>
<span id="cb52-17" class="hljs-ln-code"><a href="#cb52-17"></a>      <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb52-18" class="hljs-ln-code"><a href="#cb52-18"></a>        <span class="at">error =</span> jsonlite<span class="sc">::</span><span class="fu">unbox</span>(msg),</span>
<span id="cb52-19" class="hljs-ln-code"><a href="#cb52-19"></a>        <span class="at">valid_years =</span> gapminder_years</span>
<span id="cb52-20" class="hljs-ln-code"><a href="#cb52-20"></a>        )</span>
<span id="cb52-21" class="hljs-ln-code"><a href="#cb52-21"></a>      )</span>
<span id="cb52-22" class="hljs-ln-code"><a href="#cb52-22"></a>    }</span>
<span id="cb52-23" class="hljs-ln-code"><a href="#cb52-23"></a>  }</span>
<span id="cb52-24" class="hljs-ln-code"><a href="#cb52-24"></a>  plumber<span class="sc">::</span><span class="fu">forward</span>()</span>
<span id="cb52-25" class="hljs-ln-code"><a href="#cb52-25"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-11" class="slide level2 smaller scrollable" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="ii.-write-a-plumber-function-to-allow-a-user-to-find-out-the-population-of-any-country-during-any-year-in-the-gapminder-dataset.-5">II. Write a plumber function to allow a user to find out the population of any country during any year in the Gapminder dataset.</h3>
<p>Let’s test if the new filter works, by requesting data for a year not in the Gapminder dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="co"># encode URL / replace spaces, etc.</span></span>
<span id="cb53-2"><a href="#cb53-2"></a>url <span class="ot">&lt;-</span> <span class="fu">URLencode</span>(<span class="st">"http://127.0.0.1:1234/pop_country?country=United Kingdom&amp;year=2024"</span>)</span>
<span id="cb53-3"><a href="#cb53-3"></a>response <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(url)</span>
<span id="cb53-4"><a href="#cb53-4"></a>response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Response [http://127.0.0.1:1234/pop_country?country=United%20Kingdom&amp;year=2024]
  Date: 2024-02-22 22:15
  Status: 400
  Content-Type: application/json
  Size: 254 B</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a><span class="co"># the content is in binary, so convert the response to an R data object</span></span>
<span id="cb55-2"><a href="#cb55-2"></a>content <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(response<span class="sc">$</span>content))</span>
<span id="cb55-3"><a href="#cb55-3"></a>content</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$error
[1] "The given year, 2024, it's not part of the Gapminder dataset. Please, try one of the following: 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, 2002, 2007"

$valid_years
 [1] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 2002 2007</code></pre>
</div>
</div>
</section>
<section id="section-12" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="iii.-write-a-plumber-function-to-plot-the-population-change-of-a-user-defined-country.">III. Write a plumber function to plot the population change of a user defined country.</h3>

<p><strong>Where do we start?</strong></p>
<ol type="1">
<li>We can start by adapting our previous solution.</li>
</ol>
<div class="sourceCode" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb57-1" class="hljs-ln-code"><a href="#cb57-1"></a><span class="co">#* This function returns the population for a `country` in a particular `year`</span></span>
<span id="cb57-2" class="hljs-ln-code"><a href="#cb57-2"></a><span class="co">#* @param country String with a country in the Gapminder dataset: https://doi.org/10.7910/DVN/GJQNEQ.</span></span>
<span id="cb57-3" class="hljs-ln-code"><a href="#cb57-3"></a><span class="co">#* @param year A numeric value with a year of data available in Gapminder dataset (1952 - 2007 in steps of 5 years).</span></span>
<span id="cb57-4" class="hljs-ln-code"><a href="#cb57-4"></a><span class="co">#* @get /pop_country</span></span>
<span id="cb57-5" class="hljs-ln-code"><a href="#cb57-5"></a><span class="cf">function</span>(country, year) {</span>
<span id="cb57-6" class="hljs-ln-code"><a href="#cb57-6"></a>  pop_tbl <span class="ot">&lt;-</span> gapminder<span class="sc">::</span>gapminder <span class="sc">|&gt;</span></span>
<span id="cb57-7" class="hljs-ln-code"><a href="#cb57-7"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(country <span class="sc">==</span> <span class="sc">!!</span>country) <span class="sc">|&gt;</span></span>
<span id="cb57-8" class="hljs-ln-code"><a href="#cb57-8"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(year <span class="sc">==</span> <span class="fu">as.numeric</span>(<span class="sc">!!</span>year))</span>
<span id="cb57-9" class="hljs-ln-code"><a href="#cb57-9"></a>  <span class="fu">return</span>(pop_tbl<span class="sc">$</span>pop)</span>
<span id="cb57-10" class="hljs-ln-code"><a href="#cb57-10"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside><div>
<p><strong>Reference R Scripts:</strong> <code>6_pop_change_any_country-client.R</code> and <code>6_pop_change_any_country-server.R</code></p>
</div></aside></section>
<section id="section-13" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="iii.-write-a-plumber-function-to-plot-the-population-change-of-a-user-defined-country.-1">III. Write a plumber function to plot the population change of a user defined country.</h3>
<p><strong>Where do we start?</strong></p>
<ol type="1">
<li>We can start by adapting our previous solution.</li>
</ol>
<div class="sourceCode" id="cb58" data-code-line-numbers="|3-4|10-11|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb58-1" class="hljs-ln-code"><a href="#cb58-1"></a><span class="co">#* This function returns a plot of the change in population for a `country`, as per the Gapminder dataset</span></span>
<span id="cb58-2" class="hljs-ln-code"><a href="#cb58-2"></a><span class="co">#* @param country String with a country in the Gapminder dataset: https://doi.org/10.7910/DVN/GJQNEQ.</span></span>
<span id="cb58-3" class="hljs-ln-code"><a href="#cb58-3"></a><span class="co">#* @serializer png</span></span>
<span id="cb58-4" class="hljs-ln-code"><a href="#cb58-4"></a><span class="co">#* @get /pop_country_change</span></span>
<span id="cb58-5" class="hljs-ln-code"><a href="#cb58-5"></a><span class="cf">function</span>(country) {</span>
<span id="cb58-6" class="hljs-ln-code"><a href="#cb58-6"></a>  pop_tbl <span class="ot">&lt;-</span> gapminder<span class="sc">::</span>gapminder <span class="sc">|&gt;</span></span>
<span id="cb58-7" class="hljs-ln-code"><a href="#cb58-7"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(country <span class="sc">==</span> <span class="sc">!!</span>country) <span class="sc">|&gt;</span></span>
<span id="cb58-8" class="hljs-ln-code"><a href="#cb58-8"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(year, pop)</span>
<span id="cb58-9" class="hljs-ln-code"><a href="#cb58-9"></a>  </span>
<span id="cb58-10" class="hljs-ln-code"><a href="#cb58-10"></a>  <span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>) <span class="co"># Change number format on axes</span></span>
<span id="cb58-11" class="hljs-ln-code"><a href="#cb58-11"></a>  <span class="fu">plot</span>(pop_tbl, <span class="at">xlab =</span> <span class="st">"Year"</span>, <span class="at">ylab =</span> <span class="st">"Population"</span>)</span>
<span id="cb58-12" class="hljs-ln-code"><a href="#cb58-12"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="section-14" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="iii.-write-a-plumber-function-to-plot-the-population-change-of-a-user-defined-country.-2">III. Write a plumber function to plot the population change of a user defined country.</h3>
<ol start="2" type="1">
<li>After deploying the API, you can test it as you already learnt:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a><span class="co"># encode URL / replace spaces, etc.</span></span>
<span id="cb59-2"><a href="#cb59-2"></a>url <span class="ot">&lt;-</span> <span class="fu">URLencode</span>(<span class="st">"http://127.0.0.1:1234/pop_country_change?country=Costa Rica"</span>)</span>
<span id="cb59-3"><a href="#cb59-3"></a>response <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(url)</span>
<span id="cb59-4"><a href="#cb59-4"></a>response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Response [http://127.0.0.1:1234/pop_country_change?country=Costa%20Rica]
  Date: 2024-02-22 22:15
  Status: 200
  Content-Type: image/png
  Size: 17.3 kB
&lt;BINARY BODY&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="co"># the content is in binary, so convert the response to an R data object</span></span>
<span id="cb61-2"><a href="#cb61-2"></a>content <span class="ot">&lt;-</span> png<span class="sc">::</span><span class="fu">readPNG</span>(response<span class="sc">$</span>content)</span>
<span id="cb61-3"><a href="#cb61-3"></a>grid<span class="sc">::</span><span class="fu">grid.raster</span>(content, <span class="at">height =</span> grid<span class="sc">::</span><span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"in"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="xxiv-simmac_files/figure-revealjs/unnamed-chunk-14-1.png" width="960" class="r-stretch"></section>
<section id="section-15" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="iii.-write-a-plumber-function-to-plot-the-population-change-of-a-user-defined-country.-3">III. Write a plumber function to plot the population change of a user defined country.</h3>
<ol start="3" type="1">
<li>Alternative, instead of returning a plot, we can return a data frame by updating the endpoint:</li>
</ol>
<div class="sourceCode" id="cb62" data-code-line-numbers="|1,3|8|"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb62-1" class="hljs-ln-code"><a href="#cb62-1"></a><span class="co">#* This function returns a data frame with the change in population for a `country`, as per the Gapminder dataset</span></span>
<span id="cb62-2" class="hljs-ln-code"><a href="#cb62-2"></a><span class="co">#* @param country String with a country in the Gapminder dataset: https://doi.org/10.7910/DVN/GJQNEQ.</span></span>
<span id="cb62-3" class="hljs-ln-code"><a href="#cb62-3"></a><span class="co">#* @get /pop_country_change_df</span></span>
<span id="cb62-4" class="hljs-ln-code"><a href="#cb62-4"></a><span class="cf">function</span>(country) {</span>
<span id="cb62-5" class="hljs-ln-code"><a href="#cb62-5"></a>  pop_tbl <span class="ot">&lt;-</span> gapminder<span class="sc">::</span>gapminder <span class="sc">|&gt;</span></span>
<span id="cb62-6" class="hljs-ln-code"><a href="#cb62-6"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(country <span class="sc">==</span> <span class="sc">!!</span>country) <span class="sc">|&gt;</span></span>
<span id="cb62-7" class="hljs-ln-code"><a href="#cb62-7"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(year, pop)</span>
<span id="cb62-8" class="hljs-ln-code"><a href="#cb62-8"></a>  <span class="fu">return</span>(pop_tbl)</span>
<span id="cb62-9" class="hljs-ln-code"><a href="#cb62-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="section-16" class="slide level2 smaller" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="iii.-write-a-plumber-function-to-plot-the-population-change-of-a-user-defined-country.-4">III. Write a plumber function to plot the population change of a user defined country.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a><span class="co"># encode URL / replace spaces, etc.</span></span>
<span id="cb63-2"><a href="#cb63-2"></a>url <span class="ot">&lt;-</span> <span class="fu">URLencode</span>(<span class="st">"http://127.0.0.1:1234/pop_country_change_df?country=Costa Rica"</span>)</span>
<span id="cb63-3"><a href="#cb63-3"></a>response <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(url)</span>
<span id="cb63-4"><a href="#cb63-4"></a>response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Response [http://127.0.0.1:1234/pop_country_change_df?country=Costa%20Rica]
  Date: 2024-02-22 22:15
  Status: 200
  Content-Type: application/json
  Size: 336 B</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="co"># the content is in binary, so convert the response to an R data object</span></span>
<span id="cb65-2"><a href="#cb65-2"></a>content <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(response<span class="sc">$</span>content))</span>
<span id="cb65-3"><a href="#cb65-3"></a>tibble<span class="sc">::</span><span class="fu">as_tibble</span>(content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
    year     pop
   &lt;int&gt;   &lt;int&gt;
 1  1952  926317
 2  1957 1112300
 3  1962 1345187
 4  1967 1588717
 5  1972 1834796
 6  1977 2108457
 7  1982 2424367
 8  1987 2799811
 9  1992 3173216
10  1997 3518107
11  2002 3834934
12  2007 4133884</code></pre>
</div>
</div>
</section>
<section id="section-17" class="slide level2 smaller scrollable" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<h3 id="iii.-write-a-plumber-function-to-plot-the-population-change-of-a-user-defined-country.-5">III. Write a plumber function to plot the population change of a user defined country.</h3>
<ol start="4" type="1">
<li>Alternative plot:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb67-1" class="hljs-ln-code"><a href="#cb67-1"></a>response <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="fu">URLencode</span>(<span class="st">"http://127.0.0.1:1234/pop_country_change_df?country=Costa Rica"</span>))</span>
<span id="cb67-2" class="hljs-ln-code"><a href="#cb67-2"></a>jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(response<span class="sc">$</span>content)) <span class="sc">|&gt;</span></span>
<span id="cb67-3" class="hljs-ln-code"><a href="#cb67-3"></a>  tibble<span class="sc">::</span><span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb67-4" class="hljs-ln-code"><a href="#cb67-4"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb67-5" class="hljs-ln-code"><a href="#cb67-5"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> pop <span class="sc">/</span> <span class="fl">1E6</span>)) <span class="sc">+</span></span>
<span id="cb67-6" class="hljs-ln-code"><a href="#cb67-6"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Population [millions]"</span>, <span class="at">title =</span> <span class="st">"Population change of Costa Rica"</span>) <span class="sc">+</span></span>
<span id="cb67-7" class="hljs-ln-code"><a href="#cb67-7"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="xxiv-simmac_files/figure-revealjs/unnamed-chunk-16-1.png" width="960" class="r-stretch"></section></section>
<section>
<section id="further-considerations" class="title-slide slide level1 center">
<h1>Further considerations</h1>

</section>
<section id="section-18" class="slide level2 smaller incremental">
<h2></h2>
<h3 id="further-considerations-1">Further considerations</h3>
<ul>
<li><p>Remote deployment: <a href="https://www.rplumber.io/articles/hosting.html">https://www.rplumber.io/articles/hosting.html</a></p></li>
<li><p>Swagger documentation:</p>
<ul>
<li><a href="https://www.rplumber.io/reference/pr_set_docs.html">https://www.rplumber.io/reference/pr_set_docs.html</a></li>
<li><a href="https://swagger.io">https://swagger.io</a></li>
</ul></li>
<li><p>Security: <a href="https://www.rplumber.io/articles/security.html">https://www.rplumber.io/articles/security.html</a></p></li>
<li><p>Cheat-sheet: <a href="https://github.com/rstudio/cheatsheets/blob/main/plumber.pdf">https://github.com/rstudio/cheatsheets/blob/main/plumber.pdf</a></p></li>
</ul>
</section></section>
<section>
<section id="thank-you" class="title-slide slide level1 center">
<h1>Thank you!</h1>
<!-- {background-image="images/rU32uy.jpg"} -->
<div class="qr-image-div">
<img data-src="./images/qr_r.villegas-diaz@liverpool.ac.uk.svg" class="qr-image" data-fig-align="center"> <span class="qr-caption">r.villegas-diaz@liverpool.ac.uk</span>
</div>
<!-- # Outline -->
</section>
<section id="acknowledgements" class="slide level2 smaller">
<h2>Acknowledgements</h2>
<!-- <div class='qr-image-div'> -->
<center>
<img data-src="images/groundswell_logo.png" data-fig-align="center" width="920">
</center>
<p>In association with</p>
<center>
<img data-src="images/gw_uni_logos.png" data-fig-align="center" width="900">
</center>
<!-- </div> -->

<aside><div>
<p><strong>Website:</strong> <a href="https://www.groundswelluk.org">https://www.groundswelluk.org</a></p>
</div></aside></section></section>
<section id="references" class="title-slide slide level1 smaller scrollable">
<h1>References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-Bryan2023" class="csl-entry" role="listitem">
Bryan, J., 2023. <a href="https://CRAN.R-project.org/package=gapminder">Gapminder: Data from gapminder</a>.
</div>
<div id="ref-Butters2022" class="csl-entry" role="listitem">
Butters, O., 2022. <a href="https://github.com/OllyButters/HDS-plumber">Health data science: Plumber lecture</a>. University of Liverpool.
</div>
<div id="ref-Fox2016" class="csl-entry" role="listitem">
Fox, T., 2016. <a href="https://trevorfox.com/2016/08/what-is-an-api/">Anatomy of an HTTP request &amp; response</a>. Trevor Fox.
</div>
<div id="ref-Grguric_Buhler_2020" class="csl-entry" role="listitem">
Grgurić, E., Buhler, J., 2020. <a href="https://ubc-library-rc.github.io/intro-api/content/01_what-is-an-api.html">Introduction to APIs</a>. The University of British Columbia.
</div>
<div id="ref-Layne2020" class="csl-entry" role="listitem">
Layne, C., 2020. <a href="https://medium.com/programming-for-design-practices/a-is-for-application-api-basics-744661bb95a2">A is for application: API basics</a>. Medium.
</div>
<div id="ref-Parker" class="csl-entry" role="listitem">
Parker, A., n.d. <a href="https://tray.io/blog/how-do-apis-work">What are APIs and how do they work?</a> tray.io.
</div>
<div id="ref-realisable2023" class="csl-entry" role="listitem">
realisable, 2023. <a href="https://www.realisable.co.uk/support/documentation/iman-user-guide/DataConcepts/WebRequestAnatomy.htm">Anatomy of an HTTP request &amp; response</a>. realisable.
</div>
<div id="ref-Barret2022" class="csl-entry" role="listitem">
Schloerke, B., Allen, J., 2022. <a href="https://CRAN.R-project.org/package=plumber">Plumber: An API generator for <span>R</span></a>.
</div>
<div id="ref-Teplitzky2021" class="csl-entry" role="listitem">
Teplitzky, S., Tranfield, W., Warren, M., White, P., 2021. <a href="https://doi.org/10.7191/jeslib.2021.1194">Introducing reproducibility to citation analysis: A case study in the earth sciences</a>. Journal of eScience Librarianship 10.
</div>
<div id="ref-Tolassy2015" class="csl-entry" role="listitem">
Tolassy, K., 2015. <a href="https://mobapi.com/apis-introduction-and-context/">Apis: Introduction and context</a>. Mobapi project.
</div>
<div id="ref-wickham2014advanced" class="csl-entry" role="listitem">
Wickham, H., 2014. <a href="https://books.google.co.uk/books?id=PFHFNAEACAAJ">Advanced r</a>, Chapman &amp; hall/CRC the r series. Taylor &amp; Francis.
</div>
<div id="ref-Zhong2019" class="csl-entry" role="listitem">
Zhong, H., Mei, H., 2019. <a href="https://doi.org/10.1109/TSE.2017.2782280">An empirical study on API usages</a>. IEEE Transactions on Software Engineering 45, 319–334.
</div>
</div>

<img src="images/uol_logo.png" class="slide-logo r-stretch"><div class="footer footer-default">
<p><a href="https://www.robertovillegas-diaz.com/presentations/xxiv-simmac">https://www.robertovillegas-diaz.com/presentations/xxiv-simmac</a></p>
</div>
</section>


    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="xxiv-simmac_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="xxiv-simmac_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="xxiv-simmac_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="xxiv-simmac_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="xxiv-simmac_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="xxiv-simmac_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="xxiv-simmac_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="xxiv-simmac_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="xxiv-simmac_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="xxiv-simmac_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>